<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Tue Mar 20 15:40:27 UTC 2018 -->
<title>ConnectorTutorial</title>
<meta name="date" content="2018-03-20">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConnectorTutorial";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../diva/canvas/tutorial/CompositeFigureTutorial.html" title="class in diva.canvas.tutorial"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../diva/canvas/tutorial/ConnectorTutorial.SitedRectangle.html" title="class in diva.canvas.tutorial"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?diva/canvas/tutorial/ConnectorTutorial.html" target="_top">Frames</a></li>
<li><a href="ConnectorTutorial.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">diva.canvas.tutorial</div>
<h2 title="Class ConnectorTutorial" class="title">Class ConnectorTutorial</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>diva.canvas.tutorial.ConnectorTutorial</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">ConnectorTutorial</span>
extends java.lang.Object</pre>
<div class="block">This tutorial shows how to use Connectors.

 <img src="doc-files/ConnectorTutorial.gif" align="right" alt="Connector Tutorial">

 Connectors are objects
 that connect locations on two different figures. These locations
 are identified by objects called Sites, which represents points
 such as the north-west corner of a rectangle, or a vertex of a
 poly-line. In general, sites can be anywhere on a figure, and
 specific figure classes have methods to access their sites.  (See
 the SitesTutorial for more examples of Sites.)

 <p> Once a Connector is connected between two sites, it is easy to make
 it appear as though the Connector is "glued" to the figures
 containing the sites. Any code that moves or changes one of the two
 figure only needs to call one of route(), reroute(), headMoved(),
 or tailMoved(), and the connector will redraw itself between the
 sites.

 <p>
 The code to create a connector looks like this:
 <pre>
     Site a = figureA.getE();
     Site b = figureB.getN();
     connectorA = new StraightConnector(a, b);
     layer.add(connectorA);
 </pre>

 (Where the methods getE() and getN() are methods on some figure
 that return Sites -- in this case, on the east and north edges
 of the respective figures.)

 <p> In general, there can be arbitrarily many different kinds of
 connector. The Diva canvas currently provides two: one that simply
 draws a straight line between the two sites, and one that draws a
 "manhattan" routing between the two sites. Each of these also
 accepts an object on each end that will draw a decoration such as
 an arrow-head or a circle at the attachment point.  For example,
 we can add an arrowhead to the connector with:

 <pre>
     Arrowhead arrow = new Arrowhead(b.getX(), b.getY(), b.getNormal());
     connectorA.setHeadEnd(arrow);
 </pre>

 <p>
 Once a Connector is connected between two sites, it is easy to make it
 appear as though the Connector is "glued" to the figures containing
 the sites. Any code that moves or changes one of the two figure needs
 to call one of the methods route(), reroute(), headMoved(), or
 tailMoved() on the connector, and the connector will redraw itself
 between the sites. In this example, we have set up a DragInteractor
 to move the two rectangles shown in the image above. To also reroute
 the connectors when either changes, we add a layer listener to the
 interactor.  After the interactor has handled a mouse event, it passes
 the event on to this listener.

 <pre>
     DragInteractor i = controller.getDragInteractor();
     i.addLayerListener(new LayerAdapter () {
         public void mouseDragged (LayerEvent e) {
             connectorA.reroute();
             connectorB.reroute();
         }
     });
 </pre>

 <p>
 When a connector is selected, it gets a grab-handle on either end, which
 can be grabbed to allow the connector to be disconnected from
 the figure and reconnected to another. Although the code is
 a little convoluted, the essence of it is this:

 <pre>
     SelectionInteractor ci = new SelectionInteractor(si.getSelectionModel());
     connectorA.setInteractor(ci);
     connectorB.setInteractor(ci);

     ConnectorManipulator manipulator = new ConnectorManipulator();
     manipulator.setSnapHalo(4.0);
     manipulator.setConnectorTarget(new SRTarget());
     ci.setPrototypeDecorator(manipulator);
 </pre>

 This code first creates an instance of SelectionInteractor,
 which it sets as the interactor for the connectors. It then creates an
 instance of ConnectorManipulator, and tell the interactor that when a
 connector is selected, it should create a copy of the manipulator and
 wrap it around the connector. The manipulator highlights the connector
 with grab handles when the connector is selected.

 <p> Notice that in this code there are actually two selection interactors,
 one for the rectangles and one for the connectors.  They are linked by having
 the same selection model.  One effect that this has is that selecting a
 rectangle when a connector is already selected will deselect the connector.
 If there were two selection models then connectors and rectangles could
 be selected entirely independently from each other.

 <p> The SRTarget in the above code is an inner class that implements
 the ConnectorTarget interface. This class is used by the
 ConnectorManipulator when trying to find a good place to connect
 to. In this example, the target is returning sites on the four edges
 of the rectangles, which is why the connectors snap to those points.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>John Reekie</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.SitedRectangle.html" title="class in diva.canvas.tutorial">ConnectorTutorial.SitedRectangle</a></span></code>
<div class="block">SitedRectangle is a class that provides four sites that
 we use in the examples to attach connectors to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.SRTarget.html" title="class in diva.canvas.tutorial">ConnectorTutorial.SRTarget</a></span></code>
<div class="block">SRTarget is used to find a useful site on a SitedRectangle.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.html#ConnectorTutorial--">ConnectorTutorial</a></span>()</code>
<div class="block">Create a JCanvas and put it into a window.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.html#createConnectors--">createConnectors</a></span>()</code>
<div class="block">Create the connectors between the two figures.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.html#createFigures--">createFigures</a></span>()</code>
<div class="block">Create the figures that we will draw connectors between.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;argv)</code>
<div class="block">Main function</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../diva/canvas/tutorial/ConnectorTutorial.html#setupInteraction--">setupInteraction</a></span>()</code>
<div class="block">Set up the interaction so that the connectors stay glued to
 the two figures.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConnectorTutorial--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConnectorTutorial</h4>
<pre>public&nbsp;ConnectorTutorial()</pre>
<div class="block">Create a JCanvas and put it into a window.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createFigures--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFigures</h4>
<pre>public&nbsp;void&nbsp;createFigures()</pre>
<div class="block">Create the figures that we will draw connectors between.
 This is fairly uninteresting.</div>
</li>
</ul>
<a name="createConnectors--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createConnectors</h4>
<pre>public&nbsp;void&nbsp;createConnectors()</pre>
<div class="block">Create the connectors between the two figures. We will firstly
 create one StraightConnector with a circle and an arrowhead
 on it, and then a ManhattanConnector with a diamond on one end.</div>
</li>
</ul>
<a name="setupInteraction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupInteraction</h4>
<pre>public&nbsp;void&nbsp;setupInteraction()</pre>
<div class="block">Set up the interaction so that the connectors stay glued to
 the two figures. Since BasicController has already set up
 an interactor for us, we will attach a listener to the drag
 interactor and just call the connectors to re-route whenever
 the nmouse moves.</div>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;argv)</pre>
<div class="block">Main function</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../diva/canvas/tutorial/CompositeFigureTutorial.html" title="class in diva.canvas.tutorial"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../diva/canvas/tutorial/ConnectorTutorial.SitedRectangle.html" title="class in diva.canvas.tutorial"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?diva/canvas/tutorial/ConnectorTutorial.html" target="_top">Frames</a></li>
<li><a href="ConnectorTutorial.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
