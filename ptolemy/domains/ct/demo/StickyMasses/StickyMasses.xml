<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="StickyMasses" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.util.VersionAttribute" value="2.0-beta">
    </property>
    <property name="Continuous Time (CT) Director" class="ptolemy.domains.ct.kernel.CTMultiSolverDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="50.0">
        </property>
        <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.01">
        </property>
        <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-5">
        </property>
        <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="0.3">
        </property>
        <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
        </property>
        <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
        </property>
        <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
        </property>
        <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
        </property>
        <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
        </property>
        <property name="CTScheduler" class="ptolemy.domains.ct.kernel.CTScheduler">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="75.0, 45.0">
        </property>
    </property>
    <property name="13:0:0:annotation1" class="ptolemy.kernel.util.Attribute">
        <property name="_location" class="ptolemy.moml.Location" value="10.0, 70.0">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
           <svg>
           <text x="20" style="font-size:14; font-family:sanserif; fill:blue" y="20">This model shows a hybrid system, which mixes continuous-time modeling
with finite state machines. In this example, two point masses on springs
oscillate. However, they may collide, in which case, they stick together,
and oscillate together. The stickiness decays, and they eventually come
apart again. This is an example of a modal model, where there are two modes,
"together" and "separate". Each mode is modeled by a state in an FSM, and
each state refines to a continuous-time model of the dynamics in that mode.</text>
           </svg>
           </configure>
        </property>
        <property name="_hideName" class="ptolemy.data.expr.Parameter">
        </property>
    </property>
    <property name="position1" class="ptolemy.data.expr.Parameter" value="0.0">
    </property>
    <property name="velocity1" class="ptolemy.data.expr.Parameter" value="0.0">
    </property>
    <property name="position2" class="ptolemy.data.expr.Parameter" value="3.0">
    </property>
    <property name="velocity2" class="ptolemy.data.expr.Parameter" value="0.0">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 350]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 152]">
    </property>
    <entity name="Plot Positions vs Time" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="fillOnWrapup" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="legend" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="startingDataset" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="425.0, 260.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>Displacement of Masses</title>
<xLabel>time</xLabel>
<yLabel></yLabel>
<xRange min="0.01" max="50.0"/>
<yRange min="-0.13549561735304153" max="2.999899955462229"/>
<noGrid/>
</plot>?>
        </configure>
    </entity>
    <entity name="Sticky Mass model" class="ptolemy.vergil.fsm.modal.ModalModel">
        <property name="_Director" class="ptolemy.domains.fsm.kernel.HSDirector">
            <property name="controllerName" class="ptolemy.kernel.util.StringAttribute" value="_Controller">
            </property>
        </property>
        <property name="_tableauFactory" class="ptolemy.vergil.fsm.modal.ModalModel$ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="125.0, 265.0">
        </property>
        <port name="V1" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_hide" class="ptolemy.data.expr.Parameter">
            </property>
        </port>
        <port name="V2" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_hide" class="ptolemy.data.expr.Parameter">
            </property>
        </port>
        <port name="P1" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="P2" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
        </port>
        <port name="touched" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_hide" class="ptolemy.data.expr.Parameter">
            </property>
        </port>
        <port name="Stickiness" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_hide" class="ptolemy.data.expr.Parameter">
            </property>
        </port>
        <port name="Force" class="ptolemy.vergil.fsm.modal.ModalPort">
            <property name="output"/>
            <property name="_hide" class="ptolemy.data.expr.Parameter">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.vergil.fsm.modal.ModalController">
            <property name="initialStateName" class="ptolemy.kernel.util.StringAttribute" value="init">
            </property>
            <property name="_nonStrictMarker" class="ptolemy.kernel.util.Attribute">
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 450]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 102]">
            </property>
            <property name="p1" class="ptolemy.data.expr.Parameter" value="position1">
            </property>
            <property name="v1" class="ptolemy.data.expr.Parameter" value="velocity1">
            </property>
            <property name="p2" class="ptolemy.data.expr.Parameter" value="position2">
            </property>
            <property name="v2" class="ptolemy.data.expr.Parameter" value="velocity2">
            </property>
            <port name="V1" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 36.666666666666664">
                </property>
            </port>
            <port name="V2" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 91.66666666666667">
                </property>
            </port>
            <port name="P1" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 211.66666666666666">
                </property>
            </port>
            <port name="P2" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 151.66666666666666">
                </property>
            </port>
            <port name="touched" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 280.0">
                </property>
            </port>
            <port name="Stickiness" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 395.0">
                </property>
            </port>
            <port name="Force" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="35.0, 335.0">
                </property>
            </port>
            <entity name="init" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="110.0, 150.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <entity name="Separate" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Separate">
                </property>
                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="275.0, 185.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <entity name="Together" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Together">
                </property>
                <property name="_centerName" class="ptolemy.kernel.util.Attribute">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="515.0, 185.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <relation name="relation" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="Separate.p1 = p1; Separate.p2 = p2; Separate.v1 = v1; Separate.v2 = v2">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="touched_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="Together.p = P1; Together.v = (V1+V2)/2.0; Together.stickiness = 10.0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="abs(Force) &gt; Stickiness">
                </property>
                <property name="outputActions" class="ptolemy.domains.fsm.kernel.OutputActionsAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="Separate.p1 = P1; Separate.p2 = P1; Separate.v1 = V1; Separate.v2 = V1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
            </relation>
            <link port="init.outgoingPort" relation="relation"/>
            <link port="Separate.incomingPort" relation="relation"/>
            <link port="Separate.incomingPort" relation="relation3"/>
            <link port="Separate.outgoingPort" relation="relation2"/>
            <link port="Together.incomingPort" relation="relation2"/>
            <link port="Together.outgoingPort" relation="relation3"/>
        </entity>
        <entity name="Separate" class="ptolemy.vergil.fsm.modal.Refinement">
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 450]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 102]">
            </property>
            <property name="CTEmbedded" class="ptolemy.domains.ct.kernel.CTEmbeddedDirector">
                <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.797693135E308">
                </property>
                <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.01">
                </property>
                <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-5">
                </property>
                <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="1.0">
                </property>
                <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
                </property>
                <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
                </property>
                <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                    <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                        <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                        </property>
                        <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                        </property>
                        <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
                        </property>
                    </property>
                </property>
                <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                    <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                        <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                        </property>
                        <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                        </property>
                        <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ImpulseBESolver&quot;">
                        </property>
                    </property>
                </property>
                <property name="CTScheduler" class="ptolemy.domains.ct.kernel.CTScheduler">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="65.0, 34.5">
                </property>
            </property>
            <property name="p1" class="ptolemy.data.expr.Parameter" value="1.8499961533587">
            </property>
            <property name="v1" class="ptolemy.data.expr.Parameter" value="0.0924321178123">
            </property>
            <property name="p2" class="ptolemy.data.expr.Parameter" value="1.8499961533587">
            </property>
            <property name="v2" class="ptolemy.data.expr.Parameter" value="0.0924321178123">
            </property>
            <port name="V1" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="432.0, 50.0">
                </property>
            </port>
            <port name="V2" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="427.0, 185.0">
                </property>
            </port>
            <port name="P1" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="212.0, 185.0">
                </property>
            </port>
            <port name="P2" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="217.0, 305.0">
                </property>
            </port>
            <port name="touched" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="464.0, 355.0">
                </property>
            </port>
            <entity name="1:ZD" class="ptolemy.domains.ct.lib.ZeroCrossingDetector">
                <property name="defaultEventValue" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="365.0, 360.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;DISCRETE&quot;">
                    </property>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:E1" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="1.0*1.0 - 1.0*P1">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="196.0, 113.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="P1" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="1:E3" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.moml.Location" value="205.0, 358.0">
                </property>
                <port name="plus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="minus" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="1:V2" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="v2">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="355.0, 235.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:P1" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="p1">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="467.0, 113.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:V1" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="v1">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="322.0, 104.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:E2" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="2.0*2.0 - 2.0*P2">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="189.0, 236.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="P2" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="1:P2" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="p2">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="476.0, 242.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <relation name="1:_R3" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="126.0, 159.0">
                </vertex>
            </relation>
            <relation name="1:_R5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="1:_R8" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="278.0, 363.0">
                </vertex>
            </relation>
            <relation name="1:_R6" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="402.0, 241.0">
                </vertex>
            </relation>
            <relation name="1:_R1" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="1:_R7" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="139.0, 279.0">
                </vertex>
            </relation>
            <relation name="1:_R2" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="399.0, 118.0">
                </vertex>
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="V1" relation="1:_R2"/>
            <link port="V2" relation="1:_R6"/>
            <link port="P1" relation="1:_R3"/>
            <link port="P2" relation="1:_R7"/>
            <link port="touched" relation="relation"/>
            <link port="1:ZD.input" relation="1:_R8"/>
            <link port="1:ZD.output" relation="relation"/>
            <link port="1:ZD.trigger" relation="1:_R8"/>
            <link port="1:E1.output" relation="1:_R1"/>
            <link port="1:E1.P1" relation="1:_R3"/>
            <link port="1:E3.plus" relation="1:_R3"/>
            <link port="1:E3.minus" relation="1:_R7"/>
            <link port="1:E3.output" relation="1:_R8"/>
            <link port="1:V2.input" relation="1:_R5"/>
            <link port="1:V2.output" relation="1:_R6"/>
            <link port="1:P1.input" relation="1:_R2"/>
            <link port="1:P1.output" relation="1:_R3"/>
            <link port="1:V1.input" relation="1:_R1"/>
            <link port="1:V1.output" relation="1:_R2"/>
            <link port="1:E2.output" relation="1:_R5"/>
            <link port="1:E2.P2" relation="1:_R7"/>
            <link port="1:P2.input" relation="1:_R6"/>
            <link port="1:P2.output" relation="1:_R7"/>
        </entity>
        <entity name="Together" class="ptolemy.vergil.fsm.modal.Refinement">
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 450]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 102]">
            </property>
            <property name="p" class="ptolemy.data.expr.Parameter" value="1.4693179177411">
            </property>
            <property name="v" class="ptolemy.data.expr.Parameter" value="0.020325247703">
            </property>
            <property name="stickiness" class="ptolemy.data.expr.Parameter" value="10.0">
            </property>
            <property name="CTEmbedded" class="ptolemy.domains.ct.kernel.CTEmbeddedDirector">
                <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.797693135E308">
                </property>
                <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.01">
                </property>
                <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-5">
                </property>
                <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="1.0">
                </property>
                <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
                </property>
                <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
                </property>
                <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                    <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                        <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                        </property>
                        <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                        </property>
                        <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ForwardEulerSolver&quot;">
                        </property>
                    </property>
                </property>
                <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                    <property name="style" class="ptolemy.actor.gui.style.EditableChoiceStyle">
                        <property name="choice0" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                        </property>
                        <property name="choice1" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.BackwardEulerSolver&quot;">
                        </property>
                        <property name="choice2" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ImpulseBESolver&quot;">
                        </property>
                    </property>
                </property>
                <property name="CTScheduler" class="ptolemy.domains.ct.kernel.CTScheduler">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="70.0, 39.5">
                </property>
            </property>
            <port name="V1" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="202.0, 240.0">
                </property>
            </port>
            <port name="P1" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="490.0, 170.0">
                </property>
            </port>
            <port name="P2" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="370.0, 370.0">
                </property>
            </port>
            <port name="Stickiness" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="490.5, 130.0">
                </property>
            </port>
            <port name="Force" class="ptolemy.vergil.fsm.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="490.0, 210.0">
                </property>
            </port>
            <entity name="1:STI" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="stickiness">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="345.0, 60.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:E1" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="(1.0*1.0 + 2.0*2.0 - (1.0+2.0)*P1)/2.0">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="336.0, 144.5">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="P1" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="1:V1" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="0.0236287">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="90.0, 170.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:E2" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="1.0*1.0 - 2.0*2.0 - (1.0-2.0)*P1">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="345.0, 210.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="P1" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="1:P1" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="p">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="205.0, 170.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="signalType" class="ptolemy.data.expr.Parameter" value="&quot;CONTINUOUS&quot;">
                    </property>
                </port>
            </entity>
            <entity name="1:Gain" class="ptolemy.actor.lib.Scale">
                <property name="factor" class="ptolemy.data.expr.Parameter" value="-1.0">
                </property>
                <property name="scaleOnLeft" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="510.0, 60.0">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
                    </property>
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <relation name="1:_R3" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="147.0, 172.0">
                </vertex>
            </relation>
            <relation name="1:relation0" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="297.0, 21.0">
                </vertex>
            </relation>
            <relation name="1:_R1" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="415.0, 60.0">
                </vertex>
            </relation>
            <relation name="1:_R4" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="261.0, 171.0">
                </vertex>
            </relation>
            <relation name="1:relation1" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" class="ptolemy.moml.Vertex" value="31.0, 108.0">
                </vertex>
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="V1" relation="1:_R3"/>
            <link port="P1" relation="1:_R4"/>
            <link port="P2" relation="1:_R4"/>
            <link port="Stickiness" relation="1:_R1"/>
            <link port="Force" relation="relation"/>
            <link port="1:STI.input" relation="1:relation0"/>
            <link port="1:STI.output" relation="1:_R1"/>
            <link port="1:E1.output" relation="1:relation1"/>
            <link port="1:E1.P1" relation="1:_R4"/>
            <link port="1:V1.input" relation="1:relation1"/>
            <link port="1:V1.output" relation="1:_R3"/>
            <link port="1:E2.output" relation="relation"/>
            <link port="1:E2.P1" relation="1:_R4"/>
            <link port="1:P1.input" relation="1:_R3"/>
            <link port="1:P1.output" relation="1:_R4"/>
            <link port="1:Gain.input" relation="1:_R1"/>
            <link port="1:Gain.output" relation="1:relation0"/>
        </entity>
        <relation name="V1Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="V2Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="P1Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="P2Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="touchedRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="StickinessRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="ForceRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="V1" relation="V1Relation"/>
        <link port="V2" relation="V2Relation"/>
        <link port="P1" relation="P1Relation"/>
        <link port="P2" relation="P2Relation"/>
        <link port="touched" relation="touchedRelation"/>
        <link port="Stickiness" relation="StickinessRelation"/>
        <link port="Force" relation="ForceRelation"/>
        <link port="_Controller.V1" relation="V1Relation"/>
        <link port="_Controller.V2" relation="V2Relation"/>
        <link port="_Controller.P1" relation="P1Relation"/>
        <link port="_Controller.P2" relation="P2Relation"/>
        <link port="_Controller.touched" relation="touchedRelation"/>
        <link port="_Controller.Stickiness" relation="StickinessRelation"/>
        <link port="_Controller.Force" relation="ForceRelation"/>
        <link port="Separate.V1" relation="V1Relation"/>
        <link port="Separate.V2" relation="V2Relation"/>
        <link port="Separate.P1" relation="P1Relation"/>
        <link port="Separate.P2" relation="P2Relation"/>
        <link port="Separate.touched" relation="touchedRelation"/>
        <link port="Together.V1" relation="V1Relation"/>
        <link port="Together.P1" relation="P1Relation"/>
        <link port="Together.P2" relation="P2Relation"/>
        <link port="Together.Stickiness" relation="StickinessRelation"/>
        <link port="Together.Force" relation="ForceRelation"/>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Plot Positions vs Time.input" relation="relation"/>
    <link port="Plot Positions vs Time.input" relation="relation2"/>
    <link port="Sticky Mass model.P1" relation="relation"/>
    <link port="Sticky Mass model.P2" relation="relation2"/>
</entity>
