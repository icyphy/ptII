<!-- $Id$ -->
<html>
  <head>
    <title>org.ptolemy.fmi</title>
  </head>
  <body>
    A Java interface to Functional Mock-up Interface (FMI) files.

    <p>A Functional Mock-up Unit (FMU) is a file that contains functionality that may
      be invoked either via co-simulation or model exchange.  Typically, a FMU file has
      a <code>.fmu</code> extension.  A FMU file is a zip file that contains a file
      named <code>modelDescription.xml</code> and one or more platform-dependent 
      shared libraries.</p>

    <p>The org.ptolemy.fmi package and subpackages are a BSD-licensed
      interface between Java and FMI.</p>

    <p> FMI documentation may be found at
      <a href="http://www.modelisar.com/fmi.html">http://www.modelisar.com/fmi.html</a>.
    </p>

    <h3>Code</h3>
    Below is a description of the packages
    <ul>
      <li><a href="#org.ptolemy.fmi">org.ptolemy.fmi</a> - Read .fmu files and provide access to the data contained in the modelDescription.xml file of the .fmu file</li>
      <li><a href="#org.ptolemy.fmi.types">org.ptolemy.fmi.type</a> - Data types that are passed to and from a FMU.</li>
      <li><a href="#org.ptolemy.fmi.driver">org.ptolemy.fmi.driver</a> - Simple drivers for co-simulation and model exchange</li>
      <li><a href="#org.ptolemy.fmi.driver.test.junit">JUnit tests</a> - tests</li>
    </ul>

    <h4><a name="org.ptolemy.fmi">org.ptolemy.fmi</a> - Read .fmu files and provide access to the data contained in the modelDescription.xml file of the .fmu file</h4>

    <dl>
      <dt>FMICallbackFunctions.java</dt>
      <dd> Functional Mock-up Interface (FMI) callback functions needed by
	Java Native Access (JNA) so that a FMU * can perform functions like
	allocating and freeing memory, printing log messages and handle the
	end of a step.</dd>
      <dt>FMIEventInfo.java</dt>
      <dd>Functional Mock-up Interface (FMI) event information. 
	<p>The C language interface to Functional Mock-up Unit (FMU)
	  files includes an structure that represents event information.
	  This class represents that structure.</p>
      </dd>
      <dt>FMILibrary.java</dt>
      <dd> A Java Native Acess (JNA) Wrapper for a Functional Mock-up Unit
	shared library.
      </dd>
      <dt>FMIModelDescription.java</dt>
      <dd> An object that represents the fmiModelDescription element of a
	modelDescription.xml file contained within a 
	Functional Mock-up Unit (FMU) file.</dd>
      <dt>FMIScalarVariable.java</dt>
      <dd> An object that represents the ScalarVariable element of a
	modelDescription.xml file contained within a 
	Functional Mock-up Interface .fmu XML file.
      </dd>
      <dt>FMUFile.java</dt>
      <dd> Parse a Functional Mock-up Interface (FMI) 1.0 Functional Mock-up
	Unit (FMU) file and create a FMIModelDescription for later use.  The parseFMUFile() method in this class is the primary entry point into this package.</dd>
      <dt>FMULibrary.java</dt>
      <dd>An interface that is used by Java Native Access (JNA) to handle callbacks.
	<p>This class contains implementations of methods that are registered
	  with the FMI and then called back from by the FMI.  The callback
	  methods allocate and free memory, handle logging and are sometimes
	  called when the step ends.  For each callback we define an inner class
	  that implements the appropriate interface and has one method that
	  provides the body of the callback.
      </dd>
      <dt>FMULog.java</dt>
      <dd>A Functional Mock-up Interface (FMI) log method implementation.</dd>
      <dt>NativeSizeT.java</dt>
      <dd>A Java representation for a C type size_t, which is 32 or 64 bits.</dd>
    </dl>

    <h4><a name="org.ptolemy.fmi.types">org.ptolemy.fmi.type</a> - Data types that are passed to and from a FMU.</h4>

    <dl>
      <dt>FMIBooleanType.java</dt>
      <dd>An Functional Mock-up Interface type that represents a Boolean.</dd>
      <dt>FMIIntegerType.java</dt>
      <dd>An Functional Mock-up Interface type that represents an Integer.</dd>
      <dt>FMIRealType.java</dt>
      <dd>An Functional Mock-up Interface type that represents a Real.</dd>
      <dt>FMIStringType.java</dt>
      <dd>An Functional Mock-up Interface type that represents a String.</dd>
      <dt>FMIType.java</dt>
      <dd>The base type of all of the other FMI types.</dd>
    </dl>

    <h4><a name="org.ptolemy.fmi.driver">org.ptolemy.fmi.driver</a> - Simple drivers for co-simulation and model exchange</h4>

    <p>The org.ptolemy.fmi.drivers package is based on FMUSDK 1.0.2 from
      <a href="http://www.qtronic.de/en/fmusdk.html">http://www.qtronic.de/en/fmusdk.html</a>,
      which has has a BSD-style license.</p>

    <p>The code in org.ptolemy.fmi does not depend on the org.ptolemy.fmi.drivers package
      and thus the code in org.ptolemy.fmi is not encumbered by this license.</p>

    <p> In FMI-1.0, co-simulation fmu files contain a modelDescription.xml
      file that has an &lt;Implementation&gt; element.  Model exchange fmu
      files do not have this element.</p>

    <dl>
      <dt>FMUCoSimulation.java</dt>
      <dd>A simple example that reads a co-simulation .fmu file and performs co-simulation.</dd>
      <dt>FMUDriver.java</dt>
      <dd>The base clase for the co-simulation and model exchange drivers.</dd>
      <dt>FMUModelExchange.java</dt>
      <dd>A simple example that reads a model exchagen .fmu file and performs model exchange.</dd>
      <dt>OutputRow.java</dt>
      <dd> Given a fmu component, output the current state.</dd>
    </dl>

    <p>These drivers are based on code found in FMUSDK 1.0.2.
      These drivers are simple examples that do not read inputs and contain
      other common functionality that would be used by a real system.
    </p>

    <h4><a name="org.ptolemy.fmi.driver.test.junit">JUnit tests</a> - tests</h4>
    <p>To run the tests, do:
      <pre>
	cd org/ptolemy/fmu
	ant test
      </pre>

    <p>Sample .fmu files may be found in fmu/cs and fmu/me.  for the
      following architectures: darwin64, linux32, linux64, win32 and win64.
      These files were generated using a port of the FMUSDK which may be
      found at
      <a href="http://github.com/cxbrooks/fmusdk">http://github.com/cxbrooks/fmusdk</a>.</p>


    <h3>Sponsors</h3>
    <p>This package was developed under a Department of Energy Contract
    for the Building Controls Virtual Test Bed (BCVTB) see 
    <a href="http://simulationresearch.lbl.gov/bcvtb">http://simulationresearch.lbl.gov/bcvtb</a>.</p>

    <p>Additional support was provided by Ptolemy II, which is supported 
      by the following organizations:
      The Center for Hybrid and Embedded Software Systems (CHESS)
      at UC Berkeley, which receives support from the
      National Science Foundation (NSF awards #0720882 (CSR-EHS: PRET),
      #1035672 (CPS: PTIDES), and #0931843 (ActionWebs)),
      the U. S. Army Research Laboratory (ARL #W911NF-11-2-0038),
      the Air Force Research Lab (AFRL), the Multiscale Systems Center (MuSyC),
      one of six research centers funded under the Focus Center Research Program,
      a Semiconductor Research Corporation program, and the following companies:
      Bosch, National Instruments, Thales, and Toyota.</p>

    <h3>Authors</h3>
    <p>The org.ptolemy.fmi package has the following authors.
      <br>David Broman (UC Berkeley)
      <br>Christopher Brooks (UC Berkeley)
      <br>Edward A. Lee (UC Berkeley)
      <br>Thierry Stephane Nouidui (Lawrence Berkeley National Laboratory)
      <br>Michael Wetter (Lawrence Berkeley National Laboratory)
    </p>

    <p>The org.ptolemy.fmi.drivers package is based on FMUSDK 1.0.2 from
      <a href="http://www.qtronic.de/en/fmusdk.html">http://www.qtronic.de/en/fmusdk.html</a>.</p>

    <h3>Support</h3>
    <p>This package is delivered without support.  However, the BCVTB mailing list
    at <a href="https://groups.google.com/group/bcvtb">https://groups.google.com/group/bcvtb</a>
    maybe be used for questions.</p>

<p>
  @since Ptolemy II 8.1
</body>
</html>
