<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Thu Mar 15 13:53:20 UTC 2018 -->
<title>PtolemyServer</title>
<meta name="date" content="2018-03-15">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PtolemyServer";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":10,"i4":9,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":9,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ptserver/control/ServerManager.html" title="class in ptserver.control"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ptserver/control/PtolemyServer.html" target="_top">Frames</a></li>
<li><a href="PtolemyServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ptserver.control</div>
<h2 title="Class PtolemyServer" class="title">Class PtolemyServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ptserver.control.PtolemyServer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">PtolemyServer</span>
extends java.lang.Object
implements <a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></pre>
<div class="block">The PtolemyServer class is responsible for fulfilling simulation
  requests.  To do this, the server hosts a servlet through the Jetty
  servlet container that enables clients to administer control commands
  for starting, pausing, resuming, and stopping simulations.  The server
  also launches a separate process for the MQTT broker which is used
  for transmitting tokens between the client and server.

 <p>PtolemyServer uses mosquitto from
 <a href="http://mosquitto.org/download/#in_browser">http://mosquitto.org/download</a>.</p>

 <p>Under Windows, there is a mosquitto binary available for download.</p>
 <p>Under Mac OS X:</p>
 <ol>
 <li>Install cmake from <a href="http://www.cmake.org/cmake/resources/software.html#in_browser">http://www.cmake.org/cmake/resources/software.html</a> or from
 <a href="http://mxcl.github.com/homebrew/#in_browser">http://mxcl.github.com/homebrew</a></li>
 <li>Download and untar the mosquitto sources:
 <pre>
 cd $PTII/vendors
 wget http://mosquitto.org/files/source/mosquitto-0.10.2.tar.gz
 tar -zxf mosquitto-0.10.2.tar.gz
 cd mosquitto-0.10.2
 </pre>
 </li>
 <li> Run:
 <pre>
 cmake .
 make
 sudo make install
 </pre>
 </li>
 </ol>

 <p>This class requires that the mosquitto binary be running.  Under Mac OS X:</p>
 <pre>
 /usr/local/sbin/mosquitto &amp;
 </pre>

 <p>See the tests in $PTII/ptserver/test/junit for simple code that
 uses this class.</p></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>Ptolemy II 10.0</dd>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Justin Killian</dd>

<DT><B>Accepted Rating:</B><DD><table cellpadding=2 cellspacing=0><tr><td bgcolor="red">Red (jkillian)</td></tr></table></DD>

<DT><B>Proposed Rating:</B><DD><table cellpadding=2 cellspacing=0><tr><td bgcolor="red">Red (jkillian)</td></tr></table></DD>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.ResourceBundle</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#CONFIG">CONFIG</a></span></code>
<div class="block">The ResourceBundle containing configuration parameters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#IMAGE_BUFFER_SIZE">IMAGE_BUFFER_SIZE</a></span></code>
<div class="block">Buffer size to be used when exporting the model image.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#IMAGE_FORMAT">IMAGE_FORMAT</a></span></code>
<div class="block">Export format of the model image.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.logging.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#LOGGER">LOGGER</a></span></code>
<div class="block">The logger that will record Ptolemy errors to the log file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#SERVLET_NAME">SERVLET_NAME</a></span></code>
<div class="block">The virtual path of the command servlet.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#SERVLET_ROLE">SERVLET_ROLE</a></span></code>
<div class="block">Roles to classify users during basic authentication.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#close-ptserver.control.Ticket-">close</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Shut down the simulation thread by calling the finish() method
  on its Manager and removing the task from the server.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#createInstance-int-java.lang.String-java.lang.String-int-java.lang.String-">createInstance</a></span>(int&nbsp;servletPort,
              java.lang.String&nbsp;brokerPath,
              java.lang.String&nbsp;brokerAddress,
              int&nbsp;brokerPort,
              java.lang.String&nbsp;modelDirectory)</code>
<div class="block">Create the singleton with non-default configuration values.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#downloadModel-java.lang.String-">downloadModel</a></span>(java.lang.String&nbsp;url)</code>
<div class="block">Download the selected model to the client.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getBrokerUrl--">getBrokerUrl</a></span>()</code>
<div class="block">Get the full URL to the message broker.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="../../ptserver/control/PtolemyServer.html" title="class in ptserver.control">PtolemyServer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getInstance--">getInstance</a></span>()</code>
<div class="block">Get the singleton instance of the Ptolemy server.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getLayoutListing-java.lang.String-">getLayoutListing</a></span>(java.lang.String&nbsp;url)</code>
<div class="block">Get a listing of the layouts for a specific model available on the
  server in either the database or the local file system.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getModelListing--">getModelListing</a></span>()</code>
<div class="block">Get a listing of the models available on the server in either the
  database or the local file system.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getServletUrl--">getServletUrl</a></span>()</code>
<div class="block">Get the full URL to the servlet application.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../ptserver/control/SimulationTask.html" title="class in ptserver.control">SimulationTask</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getSimulationTask-ptserver.control.Ticket-">getSimulationTask</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Get the simulation task of the provided ticket.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../ptolemy/actor/Manager.State.html" title="class in ptolemy.actor">Manager.State</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getStateOfSimulation-ptserver.control.Ticket-">getStateOfSimulation</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Get the current state of a specific simulation based on the simulation manager's state.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.util.LinkedHashMap&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#getTokenHandlerMap--">getTokenHandlerMap</a></span>()</code>
<div class="block">Get the token handlers loaded on the server so that they can be
  set up on the client.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>
<div class="block">Initialize the Ptolemy server, set up the servlet host, and
 wait for simulation requests.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#numberOfSimulations--">numberOfSimulations</a></span>()</code>
<div class="block">Get the number of simulation on the server.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../ptserver/communication/ProxyModelResponse.html" title="class in ptserver.communication">ProxyModelResponse</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#open-java.lang.String-java.lang.String-">open</a></span>(java.lang.String&nbsp;modelUrl,
    java.lang.String&nbsp;layoutUrl)</code>
<div class="block">Open a model with the provided model URL and wait for the user to request
  the execution of the simulation.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#pause-ptserver.control.Ticket-">pause</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Pause the execution of the simulation by calling the pause() method
  on its Manager.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#resume-ptserver.control.Ticket-">resume</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Resume the execution of the simulation by calling the resume() method
  on its Manager.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Shut down the broker process and stop all active simulation
  threads by calling their Managers.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#start-ptserver.control.Ticket-">start</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Start the execution of the simulation by utilizing a
  free thread within the pool.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../ptserver/control/PtolemyServer.html#stop-ptserver.control.Ticket-">stop</a></span>(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)</code>
<div class="block">Stop the execution of the simulation by calling the finish() method
  on its Manager.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CONFIG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CONFIG</h4>
<pre>public static final&nbsp;java.util.ResourceBundle CONFIG</pre>
<div class="block">The ResourceBundle containing configuration parameters.</div>
</li>
</ul>
<a name="LOGGER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOGGER</h4>
<pre>public static final&nbsp;java.util.logging.Logger LOGGER</pre>
<div class="block">The logger that will record Ptolemy errors to the log file.</div>
</li>
</ul>
<a name="IMAGE_FORMAT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IMAGE_FORMAT</h4>
<pre>public static final&nbsp;java.lang.String IMAGE_FORMAT</pre>
<div class="block">Export format of the model image.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#ptserver.control.PtolemyServer.IMAGE_FORMAT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="IMAGE_BUFFER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IMAGE_BUFFER_SIZE</h4>
<pre>public static final&nbsp;int IMAGE_BUFFER_SIZE</pre>
<div class="block">Buffer size to be used when exporting the model image.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#ptserver.control.PtolemyServer.IMAGE_BUFFER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SERVLET_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SERVLET_NAME</h4>
<pre>public static final&nbsp;java.lang.String SERVLET_NAME</pre>
<div class="block">The virtual path of the command servlet.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#ptserver.control.PtolemyServer.SERVLET_NAME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SERVLET_ROLE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SERVLET_ROLE</h4>
<pre>public static final&nbsp;java.lang.String SERVLET_ROLE</pre>
<div class="block">Roles to classify users during basic authentication.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../constant-values.html#ptserver.control.PtolemyServer.SERVLET_ROLE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="close-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
           throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Shut down the simulation thread by calling the finish() method
  on its Manager and removing the task from the server.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#close-ptserver.control.Ticket-">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - Ticket reference to the simulation request.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server was unable to destroy the simulation thread.</dd>
</dl>
</li>
</ul>
<a name="createInstance-int-java.lang.String-java.lang.String-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createInstance</h4>
<pre>public static&nbsp;void&nbsp;createInstance(int&nbsp;servletPort,
                                  java.lang.String&nbsp;brokerPath,
                                  java.lang.String&nbsp;brokerAddress,
                                  int&nbsp;brokerPort,
                                  java.lang.String&nbsp;modelDirectory)
                           throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Create the singleton with non-default configuration values.

  <p>If any of the parameters are null, then values in the
  ptserver.PtolemyServerConfig resource are checked.  Typically, this file
  may be found as $PTII/ptserver/PtolemyServerConfig.properties.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>servletPort</code> - The port on which the servlet operates.</dd>
<dd><code>brokerPath</code> - The path to the broker executable.</dd>
<dd><code>brokerAddress</code> - The host address of the MQTT broker.</dd>
<dd><code>brokerPort</code> - The port of the broker.</dd>
<dd><code>modelDirectory</code> - The root directory of where model files are stored.
  If the value of the modelDirectory is not a directory, then a directory relative
  to the value of the ptolemy.ptII.dir (aka $PTII) property is checked.
  If that directory does not exist, then $PTII/ptserver/demo is used.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server could not be created.</dd>
</dl>
</li>
</ul>
<a name="downloadModel-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>downloadModel</h4>
<pre>public&nbsp;byte[]&nbsp;downloadModel(java.lang.String&nbsp;url)
                     throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Download the selected model to the client.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#downloadModel-java.lang.String-">downloadModel</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>url</code> - URL of the model file.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Byte array containing the model data.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server encountered an
  error opening the model file.</dd>
</dl>
</li>
</ul>
<a name="getBrokerUrl--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBrokerUrl</h4>
<pre>public&nbsp;java.lang.String&nbsp;getBrokerUrl()</pre>
<div class="block">Get the full URL to the message broker.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The URL to the servlet including port.</dd>
</dl>
</li>
</ul>
<a name="getInstance--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../ptserver/control/PtolemyServer.html" title="class in ptserver.control">PtolemyServer</a>&nbsp;getInstance()
                                 throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Get the singleton instance of the Ptolemy server. If it does not already
  exist, the singleton will be instantiated using the default
  configuration.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The PtolemyServer singleton.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server could not be launched.</dd>
</dl>
</li>
</ul>
<a name="getLayoutListing-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLayoutListing</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;getLayoutListing(java.lang.String&nbsp;url)
                                    throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Get a listing of the layouts for a specific model available on the
  server in either the database or the local file system.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#getLayoutListing-java.lang.String-">getLayoutListing</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>url</code> - Address of the model file for which layouts are found.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An array of URLs for the layouts available for the model on the server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If there was a problem discovering available layouts.</dd>
</dl>
</li>
</ul>
<a name="getModelListing--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getModelListing</h4>
<pre>public&nbsp;java.lang.String[]&nbsp;getModelListing()
                                   throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Get a listing of the models available on the server in either the
  database or the local file system.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#getModelListing--">getModelListing</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An array of URLs for the models available on the server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If there was a problem discovering available models.</dd>
</dl>
</li>
</ul>
<a name="getServletUrl--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServletUrl</h4>
<pre>public&nbsp;java.lang.String&nbsp;getServletUrl()</pre>
<div class="block">Get the full URL to the servlet application.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The URL to the servlet including port.</dd>
</dl>
</li>
</ul>
<a name="getSimulationTask-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSimulationTask</h4>
<pre>public&nbsp;<a href="../../ptserver/control/SimulationTask.html" title="class in ptserver.control">SimulationTask</a>&nbsp;getSimulationTask(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
                                 throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Get the simulation task of the provided ticket.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - The ticket associated with the simulation task.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the simulation task associated with the provided ticket.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - if the ticket is invalid.</dd>
</dl>
</li>
</ul>
<a name="getStateOfSimulation-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStateOfSimulation</h4>
<pre>public&nbsp;<a href="../../ptolemy/actor/Manager.State.html" title="class in ptolemy.actor">Manager.State</a>&nbsp;getStateOfSimulation(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
                                   throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Get the current state of a specific simulation based on the simulation manager's state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - The ticket reference to the simulation request.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The state of the queried simulation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the ticket is invalid or the state
  of the running situation could not be determined.</dd>
</dl>
</li>
</ul>
<a name="getTokenHandlerMap--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTokenHandlerMap</h4>
<pre>public&nbsp;java.util.LinkedHashMap&lt;java.lang.String,java.lang.String&gt;&nbsp;getTokenHandlerMap()
                                                                              throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Get the token handlers loaded on the server so that they can be
  set up on the client.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#getTokenHandlerMap--">getTokenHandlerMap</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The token handler map from the server.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server was unable to get the handler map.</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Initialize the Ptolemy server, set up the servlet host, and
 wait for simulation requests.

 <p>This class requires that the mosquitto binary be running.  See the class comment
 for information about building, installing and invoking mosquitto.</p>

  <p>The following optional command line switches may be used with their accompanying value:
  -servlet_port, -broker_path (if launching local broker), -broker_address, -broker_port,
  and -model_dir. The port numbers must be integers, the broker path must be the path
  to the MQTT broker executable, and the broker address must be the host address.
  The default values for the command line switches is read from the values in the
  ptserver.PtolemyServerConfig resource.  Typically, this file
  may be found as $PTII/ptserver/PtolemyServerConfig.properties.</p>

  <p>For example:</p>
  <pre>
  java -classpath java -classpath $PTII:${PTII}/ptserver/lib/hessian-4.0.7.jar:${PTII}/ptserver/lib/jetty-all-7.4.1.v20110513.jar:${PTII}/ptserver/lib/servlet-api-2.5.jar:${PTII}/ptserver/lib/wmqtt.jar \
      ptserver.control.PtolemyServer \
      -broker_address 192.168.125.169 -broker_port 1883
  </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - Optional command line arguments.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server could not be launched.</dd>
</dl>
</li>
</ul>
<a name="numberOfSimulations--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numberOfSimulations</h4>
<pre>public&nbsp;int&nbsp;numberOfSimulations()</pre>
<div class="block">Get the number of simulation on the server.  The current thread pool implementation
  allows for an infinite number of concurrent simulations rather than limiting the server to
  finite amount.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of active simulations as well as the queued requests that have not
  yet been fulfilled.</dd>
</dl>
</li>
</ul>
<a name="open-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;<a href="../../ptserver/communication/ProxyModelResponse.html" title="class in ptserver.communication">ProxyModelResponse</a>&nbsp;open(java.lang.String&nbsp;modelUrl,
                               java.lang.String&nbsp;layoutUrl)
                        throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Open a model with the provided model URL and wait for the user to request
  the execution of the simulation.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#open-java.lang.String-java.lang.String-">open</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>modelUrl</code> - The path to the model file</dd>
<dd><code>layoutUrl</code> - The path to a model's layout file</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The user's reference to the simulation task</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the model fails to load from the provided URL.</dd>
</dl>
</li>
</ul>
<a name="pause-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pause</h4>
<pre>public&nbsp;void&nbsp;pause(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
           throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Pause the execution of the simulation by calling the pause() method
  on its Manager.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#pause-ptserver.control.Ticket-">pause</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - The ticket reference to the simulation request.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server was unable to pause the running simulation.</dd>
</dl>
</li>
</ul>
<a name="resume-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resume</h4>
<pre>public&nbsp;void&nbsp;resume(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
            throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Resume the execution of the simulation by calling the resume() method
  on its Manager.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#resume-ptserver.control.Ticket-">resume</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - The ticket reference to the simulation request.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server was unable to resume the execution of the
  simulation.</dd>
</dl>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()
              throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Shut down the broker process and stop all active simulation
  threads by calling their Managers.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the servlet, broker, or thread pool cannot be stopped.</dd>
</dl>
</li>
</ul>
<a name="start-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
           throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Start the execution of the simulation by utilizing a
  free thread within the pool.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#start-ptserver.control.Ticket-">start</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - The ticket reference to the simulation request.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server was unable to start the simulation.</dd>
</dl>
</li>
</ul>
<a name="stop-ptserver.control.Ticket-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop(<a href="../../ptserver/control/Ticket.html" title="class in ptserver.control">Ticket</a>&nbsp;ticket)
          throws <a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></pre>
<div class="block">Stop the execution of the simulation by calling the finish() method
  on its Manager.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../ptserver/control/IServerManager.html#stop-ptserver.control.Ticket-">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control">IServerManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ticket</code> - The ticket reference to the simulation request.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../ptolemy/kernel/util/IllegalActionException.html" title="class in ptolemy.kernel.util">IllegalActionException</a></code> - If the server was unable to stop the simulation.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../ptserver/control/IServerManager.html" title="interface in ptserver.control"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../ptserver/control/ServerManager.html" title="class in ptserver.control"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?ptserver/control/PtolemyServer.html" target="_top">Frames</a></li>
<li><a href="PtolemyServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
