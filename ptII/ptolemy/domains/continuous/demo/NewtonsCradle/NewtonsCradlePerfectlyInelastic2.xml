<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="NewtonsCradlePerfectlyInelastic2" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.1.devel">
    </property>
    <property name="Continuous Director" class="ptolemy.domains.continuous.kernel.ContinuousDirector">
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="30">
        </property>
        <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="0.1">
        </property>
        <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1e-8">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 40.0]">
        </property>
    </property>
    <property name="acceleration" class="ptolemy.data.expr.Parameter" value="9.8">
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 85.0]">
        </property>
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </property>
    <property name="initialTheta_1" class="ptolemy.data.expr.Parameter" value="-PI/8">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 150.0]">
        </property>
    </property>
    <property name="initialTheta_1_dot" class="ptolemy.data.expr.Parameter" value="0.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 170.0]">
        </property>
    </property>
    <property name="length" class="ptolemy.data.expr.Parameter" value="8.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 105.0]">
        </property>
    </property>
    <property name="diameter" class="ptolemy.data.expr.Parameter" value="2.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 125.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={1, 22, 839, 598}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[626, 488]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{313.0, 244.0}">
    </property>
    <property name="initialTheta_2" class="ptolemy.data.expr.Parameter" value="0.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 200.0]">
        </property>
    </property>
    <property name="initialTheta_2_dot" class="ptolemy.data.expr.Parameter" value="0.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 220.0]">
        </property>
    </property>
    <property name="initialTheta_3" class="ptolemy.data.expr.Parameter" value="PI/8">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 250.0]">
        </property>
    </property>
    <property name="initialTheta_3_dot" class="ptolemy.data.expr.Parameter" value="0.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 270.0]">
        </property>
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.2,0.2,0.2,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Author: Haiyang Zheng">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 445.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Look inside the ModalModel to&#10;see how this is implemented.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 370.0]">
        </property>
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This model has a setting such that the collision between
any two balls is perfect inelastic.


Note that the initial angle of ball #3 is set to 
PI/8, which is exactly the opposite of that of 
ball #1.

This is a Zeno system in that there are an infinite number
of events happending when the first collision happens.
We disabled the animation because it takes too much time 
(around 30 seconds for an 1.6GHz cpu) to render the graphical
objects while no changes can be found in the animation.
</text></svg></configure>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, 25.0]">
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
    </property>
    <class name="BallClass" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 330.0]">
        </property>
        <property name="acceleration" class="ptolemy.data.expr.Parameter" value="acceleration">
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 30.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </property>
        <property name="length" class="ptolemy.data.expr.Parameter" value="length">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 55.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={51, 13, 877, 613}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[662, 495]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{331.0, 247.5}">
        </property>
        <property name="initialTheta" class="ptolemy.actor.parameters.PortParameter" value="0.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
	<polyline points="-15,-15, -3,-5, -16,5" style="stroke:black"></polyline>
      </svg>
    </configure>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:black" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 40.0]">
            </property>
        </property>
        <property name="initialTheta_dot" class="ptolemy.actor.parameters.PortParameter" value="0.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
	<polyline points="-15,-15, -3,-5, -16,5" style="stroke:black"></polyline>
      </svg>
    </configure>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:black" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 70.0]">
            </property>
        </property>
        <property name="x_offset" class="ptolemy.data.expr.Parameter" value="0.0">
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 80.0]">
            </property>
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </property>
        <property name="y_offset" class="ptolemy.data.expr.Parameter" value="0.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 105.0]">
            </property>
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This class defines the dynamics of a pendulum. </text></svg></configure>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 370.0]">
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
        </property>
        <property name="Image" class="ptolemy.vergil.kernel.attributes.ImageAttribute">
            <property name="source" class="ptolemy.data.expr.FileParameter" value="$CLASSPATH/ptolemy/domains/continuous/demo/NewtonsCradle/pendulum.gif">
            </property>
            <property name="scale" class="ptolemy.data.expr.Parameter" value="100">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[405.0, 280.0]">
            </property>
        </property>
        <port name="initialTheta" class="ptolemy.actor.parameters.ParameterPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{245.0, 35.0}">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="initialTheta_dot" class="ptolemy.actor.parameters.ParameterPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{245.0, 65.0}">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="x" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[590.0, 165.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="y" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[590.0, 120.0]">
            </property>
        </port>
        <port name="theta" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 305.0]">
            </property>
        </port>
        <port name="theta_dot" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 305.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="theta_dot" class="ptolemy.domains.continuous.lib.Integrator">
            <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="initialTheta_dot">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[120.486328125, 249.501953125]">
            </property>
        </entity>
        <entity name="theta" class="ptolemy.domains.continuous.lib.Integrator">
            <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="initialTheta">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[225.486328125, 249.501953125]">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="-1*sin(theta)*acceleration/length">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.486328125, 249.501953125]">
            </property>
            <port name="theta" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="PolarToCartesian" class="ptolemy.actor.lib.conversions.PolarToCartesian">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[345.0, 130.0]">
            </property>
            <port name="angle" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="length">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[215.0, 120.0]">
            </property>
        </entity>
        <entity name="x position" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="in + x_offset">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 165.0]">
            </property>
            <port name="in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="y position" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="in + y_offset">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 120.0]">
            </property>
            <port name="in" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[165.486328125, 249.501953125]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[585.0, 195.0]">
            </vertex>
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[295.486328125, 249.501953125]">
            </vertex>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="x" relation="relation5"/>
        <link port="y" relation="relation6"/>
        <link port="theta" relation="relation7"/>
        <link port="theta_dot" relation="relation"/>
        <link port="theta_dot.derivative" relation="relation3"/>
        <link port="theta_dot.state" relation="relation"/>
        <link port="theta.derivative" relation="relation"/>
        <link port="theta.state" relation="relation7"/>
        <link port="Expression.output" relation="relation3"/>
        <link port="Expression.theta" relation="relation7"/>
        <link port="PolarToCartesian.magnitude" relation="relation2"/>
        <link port="PolarToCartesian.angle" relation="relation7"/>
        <link port="PolarToCartesian.x" relation="relation9"/>
        <link port="PolarToCartesian.y" relation="relation10"/>
        <link port="Const.output" relation="relation2"/>
        <link port="x position.output" relation="relation5"/>
        <link port="x position.in" relation="relation10"/>
        <link port="y position.output" relation="relation6"/>
        <link port="y position.in" relation="relation9"/>
    </class>
    <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 335.0]">
        </property>
        <port name="x_1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="x_2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="theta_1_dot" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
            </property>
        </port>
        <port name="theta_2_dot" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
            </property>
        </port>
        <port name="x_3" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="theta_3_dot" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
            </property>
        </port>
        <port name="theta_1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
        </port>
        <port name="theta_2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
        </port>
        <port name="theta_3" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
        <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
      </configure>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={261, 90, 918, 720}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[705, 609]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.060676264655">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{308.5040373599538, 207.8045440458195}">
            </property>
            <property name="annotation" class="ptolemy.kernel.util.Attribute">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This model has a setting such that the collision between
any two balls is perfect inelastic.</text></svg></configure>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 50.0]">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.0,0.0,1.0}">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The event detection mechanism introduces an overlap of two balls to ensure these &#10;balls collide. This overlap causes energy loss, meaning not all potential energy &#10;gets transformed into kinetic energy. This overlap is neglectable with a small &#10;error tolerance (e.g. 1e-8), the corresponding energy loss is also neglectable in&#10;a reasonably long simulation (e.g. 1000 time units).&#10;">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[10.0, 385.0]">
                </property>
            </property>
            <port name="x_1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[360.0, 285.0]">
                </property>
            </port>
            <port name="x_2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 285.0]">
                </property>
            </port>
            <port name="theta_1_dot" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[360.0, 330.0]">
                </property>
            </port>
            <port name="theta_2_dot" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 330.0]">
                </property>
            </port>
            <port name="x_3" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 285.0]">
                </property>
            </port>
            <port name="theta_3_dot" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 330.0]">
                </property>
            </port>
            <port name="theta_1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[360.0, 370.0]">
                </property>
            </port>
            <port name="theta_2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 370.0]">
                </property>
            </port>
            <port name="theta_3" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 370.0]">
                </property>
            </port>
            <entity name="state" class="ptolemy.domains.modal.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="state">
                </property>
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[272.7311234474182, 229.44648361206055]">
                </property>
            </entity>
            <entity name="init" class="ptolemy.domains.modal.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[237.73112344741827, 154.44648361206055]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="((x_1 + diameter) &gt;= x_2) &#10;  &amp;&amp; (theta_1_dot &gt; theta_2_dot)">
                    <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                        <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                        <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                        </property>
                    </property>
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="&#10;state.theta_1_dot_initial = (theta_1_dot + theta_2_dot)/2;&#10;state.theta_2_dot_initial = (theta_1_dot + theta_2_dot)/2">
                    <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                        <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                        <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                        </property>
                    </property>
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.260991363440288">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.3947358055295304">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="&#10;state.theta_1_dot_initial = initialTheta_1_dot;&#10;state.theta_2_dot_initial = initialTheta_2_dot;&#10;state.theta_3_dot_initial = initialTheta_3_dot;&#10;state.theta_1_initial = initialTheta_1;&#10;state.theta_2_initial = initialTheta_2;&#10;state.theta_3_initial = initialTheta_3">
                    <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                        <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                        <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                        </property>
                    </property>
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.622752043467985">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.5698846633996298">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="((x_2 + diameter) &gt;= x_3) &#10;  &amp;&amp; (theta_2_dot &gt; theta_3_dot)">
                    <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                        <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                        <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                        </property>
                    </property>
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="&#10;state.theta_2_dot_initial = (theta_2_dot + theta_3_dot)/2;&#10;state.theta_3_dot_initial = (theta_2_dot + theta_3_dot)/2">
                    <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                        <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                        </property>
                        <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                        </property>
                    </property>
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.234717179630848">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.8936885273278177">
                </property>
                <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <link port="state.incomingPort" relation="relation"/>
            <link port="state.incomingPort" relation="relation2"/>
            <link port="state.incomingPort" relation="relation3"/>
            <link port="state.outgoingPort" relation="relation"/>
            <link port="state.outgoingPort" relation="relation3"/>
            <link port="init.outgoingPort" relation="relation2"/>
        </entity>
        <entity name="state" class="ptolemy.domains.modal.modal.Refinement">
            <property name="Continuous Director" class="ptolemy.domains.continuous.kernel.ContinuousDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 80.0]">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={91, 109, 857, 468}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[642, 350]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{321.0, 175.0}">
            </property>
            <property name="theta_1_dot_initial" class="ptolemy.data.expr.Parameter" value="-0.0">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 245.0]">
                </property>
            </property>
            <property name="theta_2_dot_initial" class="ptolemy.data.expr.Parameter" value="1.185425822326E-18">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 270.0]">
                </property>
            </property>
            <property name="theta_3_dot_initial" class="ptolemy.data.expr.Parameter" value="1.185425822326E-18">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 295.0]">
                </property>
            </property>
            <property name="theta_1_initial" class="ptolemy.data.expr.Parameter" value="-0.3926990816987">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 140.0]">
                </property>
            </property>
            <property name="theta_2_initial" class="ptolemy.data.expr.Parameter" value="0.0">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 165.0]">
                </property>
            </property>
            <property name="theta_3_initial" class="ptolemy.data.expr.Parameter" value="0.3926990816987">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 190.0]">
                </property>
            </property>
            <port name="x_1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 75.0]">
                </property>
            </port>
            <port name="x_2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 170.0]">
                </property>
            </port>
            <port name="theta_1_dot" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 130.0]">
                </property>
            </port>
            <port name="theta_2_dot" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 225.0]">
                </property>
            </port>
            <port name="x_3" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[560.771484375, 264.6875]">
                </property>
            </port>
            <port name="theta_3_dot" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[555.0, 325.0]">
                </property>
            </port>
            <port name="theta_1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 105.0]">
                </property>
            </port>
            <port name="theta_2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 200.0]">
                </property>
            </port>
            <port name="theta_3" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 295.0]">
                </property>
            </port>
            <entity name="ball1" class="BallClass">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 95.0]">
                </property>
                <property name="initialTheta" class="ptolemy.actor.parameters.PortParameter" value="theta_1_initial">
                </property>
                <property name="initialTheta_dot" class="ptolemy.actor.parameters.PortParameter" value="theta_1_dot_initial">
                </property>
                <port name="initialTheta" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 30.0}">
                    </property>
                </port>
                <port name="initialTheta_dot" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 60.0}">
                    </property>
                </port>
            </entity>
            <entity name="ball2" class="BallClass">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 190.0]">
                </property>
                <property name="initialTheta" class="ptolemy.actor.parameters.PortParameter" value="theta_2_initial">
                </property>
                <property name="initialTheta_dot" class="ptolemy.actor.parameters.PortParameter" value="theta_2_dot_initial">
                </property>
                <property name="x_offset" class="ptolemy.data.expr.Parameter" value="diameter">
                </property>
                <port name="initialTheta" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 30.0}">
                    </property>
                </port>
                <port name="initialTheta_dot" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 60.0}">
                    </property>
                </port>
            </entity>
            <entity name="ball3" class="BallClass">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 285.0]">
                </property>
                <property name="initialTheta" class="ptolemy.actor.parameters.PortParameter" value="theta_3_initial">
                </property>
                <property name="initialTheta_dot" class="ptolemy.actor.parameters.PortParameter" value="theta_3_dot_initial">
                </property>
                <property name="x_offset" class="ptolemy.data.expr.Parameter" value="2*diameter">
                </property>
                <port name="initialTheta" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 30.0}">
                    </property>
                </port>
                <port name="initialTheta_dot" class="ptolemy.actor.parameters.ParameterPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225.0, 60.0}">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[470.0, 75.0]">
                </vertex>
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[470.0, 170.0]">
                </vertex>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[470.0, 130.0]">
                </vertex>
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[465.0, 225.0]">
                </vertex>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[470.0, 265.0]">
                </vertex>
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[464.228515625, 325.3125]">
                </vertex>
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="x_1" relation="relation"/>
            <link port="x_2" relation="relation2"/>
            <link port="theta_1_dot" relation="relation3"/>
            <link port="theta_2_dot" relation="relation4"/>
            <link port="x_3" relation="relation5"/>
            <link port="theta_3_dot" relation="relation6"/>
            <link port="theta_1" relation="relation9"/>
            <link port="theta_2" relation="relation8"/>
            <link port="theta_3" relation="relation7"/>
            <link port="ball1.x" relation="relation"/>
            <link port="ball1.theta" relation="relation9"/>
            <link port="ball1.theta_dot" relation="relation3"/>
            <link port="ball2.x" relation="relation2"/>
            <link port="ball2.theta" relation="relation8"/>
            <link port="ball2.theta_dot" relation="relation4"/>
            <link port="ball3.x" relation="relation5"/>
            <link port="ball3.theta" relation="relation7"/>
            <link port="ball3.theta_dot" relation="relation6"/>
        </entity>
        <relation name="x_1Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="x_2Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="theta_1_dotRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="theta_2_dotRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="x_3Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="theta_3_dotRelation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="theta_1Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="theta_2Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="theta_3Relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="x_1" relation="x_1Relation"/>
        <link port="x_2" relation="x_2Relation"/>
        <link port="theta_1_dot" relation="theta_1_dotRelation"/>
        <link port="theta_2_dot" relation="theta_2_dotRelation"/>
        <link port="x_3" relation="x_3Relation"/>
        <link port="theta_3_dot" relation="theta_3_dotRelation"/>
        <link port="theta_1" relation="theta_1Relation"/>
        <link port="theta_2" relation="theta_2Relation"/>
        <link port="theta_3" relation="theta_3Relation"/>
        <link port="_Controller.x_1" relation="x_1Relation"/>
        <link port="_Controller.x_2" relation="x_2Relation"/>
        <link port="_Controller.theta_1_dot" relation="theta_1_dotRelation"/>
        <link port="_Controller.theta_2_dot" relation="theta_2_dotRelation"/>
        <link port="_Controller.x_3" relation="x_3Relation"/>
        <link port="_Controller.theta_3_dot" relation="theta_3_dotRelation"/>
        <link port="_Controller.theta_1" relation="theta_1Relation"/>
        <link port="_Controller.theta_2" relation="theta_2Relation"/>
        <link port="_Controller.theta_3" relation="theta_3Relation"/>
        <link port="state.x_1" relation="x_1Relation"/>
        <link port="state.x_2" relation="x_2Relation"/>
        <link port="state.theta_1_dot" relation="theta_1_dotRelation"/>
        <link port="state.theta_2_dot" relation="theta_2_dotRelation"/>
        <link port="state.x_3" relation="x_3Relation"/>
        <link port="state.theta_3_dot" relation="theta_3_dotRelation"/>
        <link port="state.theta_1" relation="theta_1Relation"/>
        <link port="state.theta_2" relation="theta_2Relation"/>
        <link port="state.theta_3" relation="theta_3Relation"/>
    </entity>
    <entity name="positions" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="legend" class="ptolemy.kernel.util.StringAttribute" value="x_1, x_2, x_3">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={2, 460, 494, 267}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[494, 223]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 335.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>positions</title>
<xLabel>time</xLabel>
<yLabel>displacements</yLabel>
<xRange min="1.7976931348623157E308" max="-1.7976931348623157E308"/>
<yRange min="1.7976931348623157E308" max="-1.7976931348623157E308"/>
</plot>?>
        </configure>
    </entity>
    <entity name="velocities" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="legend" class="ptolemy.kernel.util.StringAttribute" value="theta_1_dot, theta_2_dot, theta_3_dot">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={504, 459, 511, 268}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[511, 224]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{235.0, 335.0}">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
        </port>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>velocities</title>
<xLabel>time</xLabel>
<yLabel>velocities</yLabel>
<xRange min="1.7976931348623157E308" max="-1.7976931348623157E308"/>
<yRange min="1.7976931348623157E308" max="-1.7976931348623157E308"/>
</plot>?>
        </configure>
    </entity>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[495.0, 325.0]">
        </vertex>
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[495.0, 335.0]">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[495.0, 345.0]">
        </vertex>
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[290.0, 345.0]">
        </vertex>
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[290.0, 325.0]">
        </vertex>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[290.0, 335.0]">
        </vertex>
    </relation>
    <link port="ModalModel.x_1" relation="relation7"/>
    <link port="ModalModel.x_2" relation="relation8"/>
    <link port="ModalModel.theta_1_dot" relation="relation3"/>
    <link port="ModalModel.theta_2_dot" relation="relation5"/>
    <link port="ModalModel.x_3" relation="relation"/>
    <link port="ModalModel.theta_3_dot" relation="relation2"/>
    <link port="positions.input" relation="relation7"/>
    <link port="positions.input" relation="relation8"/>
    <link port="positions.input" relation="relation"/>
    <link port="velocities.input" relation="relation3"/>
    <link port="velocities.input" relation="relation5"/>
    <link port="velocities.input" relation="relation2"/>
</entity>
