<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: org/terraswarm/accessor/accessors/web/hosts/node/nodeHost.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: org/terraswarm/accessor/accessors/web/hosts/node/nodeHost.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Node.js swarmlet host.
//
// Copyright (c) 2015-2017 The Regents of the University of California.
// All rights reserved.
//
// Permission is hereby granted, without written agreement and without
// license or royalty fees, to use, copy, modify, and distribute this
// software and its documentation for any purpose, provided that the above
// copyright notice and the following two paragraphs appear in all copies
// of this software.
//
// IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY
// FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES
// ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF
// THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF
// SUCH DAMAGE.
//
// THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES,
// INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE
// PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF
// CALIFORNIA HAS NO OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES,
// ENHANCEMENTS, OR MODIFICATIONS.
//

/** Node.js swarmlet host module. To use this, issue the following
 *  command:
 *
 *    var nodeHost = require(path + '/nodeHost.js');
 *
 *  where path is the path to this nodeHost.js file.
 *
 *  The resulting nodeHost object provides a number of functions,
 *  including:
 *
 *  * getAccessorCode(accessorClass): Return the source code for
 *    an accessor, given its fully-qualified class name, e.g. 'net/REST'.
 *
 *  * getTopLevelAccessors(): Return an array of instantiated
 *    top-level accessors (implemented in commonHost.js).
 *
 *  * installIfMissingThenRequire(npmPackage): Check the require path
 *    for a module and if it is not found, invoke npm install.
 *
 *  * instantiate(accessorName, accessorClass): Instantiate an
 *    accessor with an assigned name (an arbitrary string) and
 *    its fully-qualified class name, e.g. 'net/REST'.
 *
 *  * instantiateTopLevel(): Instantiate and return a top-level
 *    accessor.
 *
 *  * startHostShell(): Start an interactive shell on stdin/stdout
 *    to execute commands. Type 'help' in this shell for a list of
 *    supported commands.
 *
 *  * stopAllAccessors(): Call wrapup on all top-level accessors.
 *
 *  See nodeHostShell.js for an example use of this module.
 *
 *  See [https://accessors.org/accessors/wiki/Main/DuktapeHost](https://accessors.org/wiki/Main/DuktapeHost).
 *
 *  @module @accessors-hosts/nodeHost
 *  @author Edward A. Lee, Chris Shaver, Christopher Brooks
 *  @version $$Id$$
 */

//////////////////////////////////////////////////////////////////////////
// Module dependencies.

var path = require('path');
var fs = require('fs');

// Locally defined modules.
var commonHost = require('@accessors-hosts/common');

// This Node host allows trusted accessors, which means that any
// accessor whose class name begins with 'trusted/' can invoke the
// function getTopLevelAccessors().
commonHost.allowTrustedAccessors(true);

//////////////////////////////////////////////////////////////////////////
// Module variables.

/** Module variable giving the paths to search for accessors.
 *  By default this module assumes that accessors are stored in
 *  __dirname/../.., where __dirname is the directory where this
 *  script is located.
 */
var accessorPath = [path.join(__dirname, '..', '..')];

/////////////////////////////////////////////////
// Functions are defined below here.
// Please keep them alphabetical.

/** Return the source code for an accessor from its fully qualified name.
 *
 *  A name can be an absolute pathname, a relative pathname or a fully
 *  qualified accessor name such as 'net/REST'.
 *
 *  If name refers to a file that can be read, then the contents of that file
 *  are returned.  If name does not refer to a file that can be read,
 *  then each element of the accessorPath array is prepended to the name
 *  and a file read is attempted.
 *
 *  If there is no such accessor on the accessor search path, then
 *  an exception is thrown.
 *
 *  @param name Fully qualified accessor name, e.g. 'net/REST'.
 */
function getAccessorCode(name) {
    var code;
    // Append a '.js' to the name, if needed.
    if (name.indexOf('.js') !== name.length - 3) {
        name += '.js';
    }

    // Look for the accessor as a regular file.
    // See https://www.terraswarm.org/accessors/wiki/Main/DeploymentNotes#SSHScript
    try {
        code = fs.readFileSync(name, 'utf8');
        return code;
    } catch (error) {
        // Ignore, we will look search the accessorPath.
    }

    for (var i = 0; i &lt; accessorPath.length; i++) {
        var location = path.join(accessorPath[i], name);
        try {
            code = fs.readFileSync(location, 'utf8');
            //console.log('nodeHost.js: Reading accessor at: ' + location);
            break;
        } catch (error) {
            //console.log('nodeHost.js: getAccessorCode(' + name + '): error:');
            continue;
        }
    }
    if (!code) {
        throw new Error('Accessor ' + name + ' not found on path: ' + accessorPath);
    }
    return code;
}

/** Get a resource.
 *  Below are the types of resources that are handled
 *  all other resources will cause an error.
 *
 *  * $KEYSTORE is replaced with $HOME/.ptKeystore
 *
 *  @param uri A specification for the resource.
 */
getResource = function (uri) {

    // We might want the Node host (and in fact all hosts) to allow access to
    // resources that are given with relative paths. By default, these would
    // get resolved relative to the location of the file defining the swarmlet.
    // This might even work in the Browser host with the same source
    // policy.

    if (uri.startsWith('$KEYSTORE') === true) {
        var home = process.env.HOME;
        if (home === undefined) {
            throw new Error('Could not get $HOME from the environment to expand ' + uri);
        } else {
            uri = uri.replace('$KEYSTORE', home + path.sep + '.ptKeystore');
            code = fs.readFileSync(uri, 'utf8');
            return code;
        }
    }
    throw new Error('getResouce(' + uri + ', ' + timeout + ') only supports $KEYSTORE, not ' +
        uri);
}

/** Check the require path for a module and if it is not found, invoke
 *  npm install.
 *
 *  In node, the module loading system caches the return values of stat()
 *  calls.  Thus, if we require() a missing package, then installing it
 *  will not invalidate the cache and calling require() again will not
 *  find our newly installed cache.  As a workaround, for possibly missing
 *  packages, we search the array of paths contained by module.paths.
 *
 *  @param npmPackage the package to be possibly installed using npm
 *  and then required.
 *  @return the value returned by requiring the package
 */
function installIfMissingThenRequire(npmPackage) {
    // console.log('nodeHost.js: installIfMissingThenRequire(' + npmPackage);
    const paths = module.paths;
    var foundIt = false;
    for (var i = 0; i &lt; paths.length; i++) {
        if (fs.existsSync(paths[i] + '/' + npmPackage)) {
            console.log('nodeHost.js: installIfMissingThenRequire(' + npmPackage + '): found ' + paths[i] + '/' + npmPackage);
            foundIt = true;
            break;
        }
    }
    if (!foundIt) {
        var execSync = require('child_process').execSync;
        var npmOutput;
        try {
            console.log('Invoking npm install ' + npmPackage);
            npmOutput = execSync('npm install ' + npmPackage);
            console.log('Done with npm install ' + npmPackage);
        } catch (error) {
            console.log('npm install ' + npmPackage + ' failed: ' + error + '.  A return code of 1 can typically be ignored because package.json is present.');
        }     
    }
    // console.log('nodeHost.js: installIfMissingThenRequire(): about to do require(' + npmPackage + ')');
    var myPackage = require(npmPackage);
    // console.log('nodeHost.js: installIfMissingThenRequire(): returning: ' + myPackage);
    return myPackage;
}

/** Instantiate and return an accessor.
 *  This will throw an exception if there is no such accessor class on the accessor
 *  search path.
 *  @param accessorName The name to give to the instance.
 *  @param accessorClass Fully qualified accessor class name, e.g. 'net/REST'.
 */
function instantiate(accessorName, accessorClass) {
    // The instantiate() function must be defined in
    // web/hosts/nodeHost/nodeHost.js so that require() knows to look
    // in the web/hosts/nodeHost/node_modules.

    // FIXME: The bindings should be a bindings object where require == a requireLocal
    // function that searches first for local modules.
    var bindings = {
        'getResource': getResource,
        'require': require,
    };
    var instance = commonHost.instantiateAccessor(
        accessorName, accessorClass, getAccessorCode, bindings);
    //console.log('nodeHost.js: Instantiated accessor ' + accessorName + ' with class ' + accessorClass);
    return instance;
}

/** Instantiate and return a top-level accessor.
 *  This will throw an exception if there is no such accessor class on the accessor
 *  search path.
 *  @param accessorName The name to give to the instance.
 *  @param accessorClass Fully qualified accessor class name, e.g. 'net/REST'.
 */
function instantiateTopLevel(accessorName, accessorClass) {
    // FIXME: See if we can get rid of instantiateTopLevel
    return instantiate(accessorName, accessorClass);
}

/** Handle calls to exit, Control-C, errors and uncaught exceptions.
 *  The wrapup() method is invoked for all accessors.  The first
 *  exception is reported and process.exitCode is set to non-zero;
 *  @param options Properties for the call.  Properties include cleanup and exit.
 */
function exitHandler(options, err) {
    // console.log("nodeHost.js: exitHandler(" + options + ", " + err + ") process.exitCode: " +  process.exitCode + ' options: ');
    // console.log(options);
    // var myError = new Error("nodeHost.js: In exitHandler()");
    // console.log(myError.stack);

    var accessor,
        composite,
        i,
        initialThrowable = null;
    if (options.cleanup) {
        try {
            commonHost.stopAllAccessors();
        } catch (wrapupError) {
            console.log("nodeHost.js: wrapup() failed: " + wrapupError);
            if (process.exitCode === undefined) {
                process.exitCode = 1;
            }
        }
        if (initialThrowable !== null) {
            console.log("nodeHost.js: while invoking wrapup() of all accessors, an exception was thrown: " +
                initialThrowable + ":" + initialThrowable.stack);
            if (process.exitCode === undefined) {
                process.exitCode = 1;
            }
        }
    }
    // Use kill -30 to display a stack
    if (options.stack) {
        var util = require('util');
        console.log("nodeHost.js: SIGUSR1 was received.");
        // console.log(util.inspect(this, {depth: 15}));
        for (composite in this.process.mainModule.exports.accessors) {
            for (i in this.process.mainModule.exports.accessors[composite].containedAccessors) {
                accessor = this.process.mainModule.exports.accessors[composite].containedAccessors[i];
                console.log("accessor: " + accessor.accessorName);
                //console.log(util.inspect(accessor, {depth: 2}));
                console.log("accessor.outputs: ");
                console.log(util.inspect(accessor.outputs, {
                    depth: 2
                }));
                for (var output in accessor.outputs) {
                    console.log("accessor.outputs: output: ");
                    console.log(output);
                    console.log("accessor.outputs: outputs[output]: ");
                    console.log(accessor.outputs[output]);
                    var destinations = accessor.outputs[output];
                    for (var destination in destinations.destinations) {
                        console.log("output " + output + ", destination: " + destination);
                    }
                }
            }
        }
        err = new Error("SIGUSR1 was received, here's the stack.");
    }
    if (err) {
        if (err.stack === undefined) {
            if (err !== process.exitCode) {
                console.log("nodeHost.js: err: \"" + err + "\" has no stack.");
            }
        } else {
            console.log("nodeHost.js: Error: " + err.stack);
        }
        if (process.exitCode === undefined) {
            process.exitCode = 1;
        }
    }

    if (process.exitCode !== 0) {
        console.log('nodeHost.js: Error: Node will exit and return ' +
            process.exitCode + ', which should be zero.');
    }

    // If we the exitHandler was called with 'cleanup', then we won't exit here,
    // but will exit later.
    if (options.exit) {
        // console.log(new Error("nodeHost.js: exitHandler(): Calling process.exit("
        //        + process.exitCode
        //        + "): Here is the stack so we know why: ").stack);
        process.exit(process.exitCode);
    }
}

// Indicator of whether the interactive host is already running.
var interactiveHostRunning = false;

/** Start an interactive version of this host as a shell.
 *  This will produce a prompt on stdout that accepts JavaScript statements
 *  on stdin and executes them.
 */
function startHostShell() {
    if (interactiveHostRunning) {
        console.log('Interactive host is already running.');
        return;
    }
    interactiveHostRunning = true;
    var readline = require('readline');

    // Support auto completion for common commands.
    function completer(line) {
        var completions = [
            'exit',
            'getTopLevelAccessors()',
            'help',
            'instantiate(',
            'provideInput(',
            'setParameter(',
            'quit',
        ];
        var hits = completions.filter(function (candidate) {
            // FIXME: need a better filter.
            return candidate.indexOf(line) === 0;
        });
        // show all completions if none found
        return [hits.length ? hits : completions, line];
    }
    // FIXME: make options passable to startHost()?
    var rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout,
        completer: completer,
    });

    var self = this;

    // The next bit of code is quite tricky, and is due to
    // Axel Rauschmayer. See
    // https://dzone.com/articles/implementing-command-line-eval
    // The reason it is tricky is that we want to support statements like
    // "var foo = 10" on the command line, and we want the variable foo
    // to be stored as a property of self-contained object so it can be used
    // in subsequent commands. While this can be done using eval() as an
    // indirect call, which stores foo in the global scope, this is not
    // very clean, because it makes it possible to clobber functions and
    // properties of the global scope.
    //
    // This code uses an Ecma 6 "generator," which is a long running
    // function that pauses at "yield" statements. Each yield statement
    // sends a value that is returned by a call to next() on the generator.
    // And each call to next() can pass in a value that will be returned
    // by the generator.  For a clear explanation of
    // ES6 generators, see https://davidwalsh.name/es6-generators
    // The reason that generators solve the problem is that variable
    // assignments become properties of the generator function evalGenerator
    // rather than properties of the global scope. Since this function
    // never returns, its assigned variables are never forgotten.
    // Also, the functions available on the command line can be provided
    // here in a controlled way, including overriding any global functions,
    // if necessary.
    //
    // Note that one side effect of this strategy is that all context variables
    // here (nodeHost, fs, path, accessorPath, etc.) are available in the shell.
    // These are not available to accessors, however, so this seems OK.
    function* evalGenerator() {
        var command = yield;

        // Define functions available to the command line.
        var getTopLevelAccessors = commonHost.getTopLevelAccessors;
        var stopAllAccessors = commonHost.stopAllAccessors;
        var uniqueName = commonHost.uniqueName;

        while (true) {
            try {
                var result = eval(command);
                command = yield result;
            } catch (e) {
                command = yield e.toString();
            }
        }
    }

    function Evaluator() {
        this.evalGen = evalGenerator();
        this.evalGen.next(); // start
    }
    Evaluator.prototype.evaluate = function (str) {
        return this.evalGen.next(str);
    };
    var evaluator = new Evaluator();

    // Emitted whenever a command is entered on stdin.
    rl.on('line', function (command) {
        // Remove any trailing semicolon.
        command = command.replace(/;$/, '');

        ///////////////
        // exit and quit functions.
        // NOTE: \s is whitespace. The 'i' qualifier means 'case insensitive'.
        // Also, tolerate trailing semicolon.
        if (command.match(/^\s*quit\s*$/i) ||
            command.match(/^\s*exit\s*$/i)) {
            console.log('exit');
            interactiveHostRunning = false;
            rl.close();
            // Invoke process.exit() so that exitHandler() in
            // nodeHost.js gets invoked and calls wrapup.
            process.exit();
            return;
        }
        if (command.match(/^\s*help\s*$/i)) {
            var helpFile = path.join(__dirname, 'nodeHostShellHelp.txt');
            var helpText = fs.readFileSync(helpFile, 'utf8');
            console.log(helpText);
            rl.prompt();
            return;
        }

        ///////////////
        // Evaluate anything else.
        try {
            var response = evaluator.evaluate(command);
            console.log(response.value);
        } catch (error) {
            console.log(error);
        }
        rl.prompt();
    });
    // Emitted whenever the input stream receives a ^C.
    rl.on('SIGINT', function () {
        rl.question('Are you sure you want to exit? ', function (answer) {
            if (answer.match(/^y(es)?$/i)) {
                rl.close();
                process.exit();
                return;
            } else {
                console.log('Cancelled.');
                rl.prompt();
            }
        });
    });
    // Emitted whenever the input stream is sent to the background with ^Z
    // and then continued with fg. Does not work on Windows.
    rl.on('SIGCONT', function () {
        // `prompt` will automatically resume the stream
        rl.prompt();
    });

    console.log('Welcome to the Node swarmlet host (nsh). Type exit to exit, help for help.');
    rl.setPrompt('nsh> ');
    rl.prompt();

    return evaluator;
}

///////////////////////////////////////////////////////////////////////
// Execution handlers.

// If the node host is exiting, then cleanup, which includes invoking wrapup();
process.on('exit', exitHandler.bind(null, {
    cleanup: true
}));

// Catch the Control-C event, which calls exit, which is caught in the line above.
process.on('SIGINT', exitHandler.bind(null, {
    exit: true
}));

// Catch kill -30 and display a stack.  SIGUSR1 is reserved by node to
// start the debugger, but we use it here anyway.
process.on('SIGUSR1', exitHandler.bind(null, {
    stack: true
}));

// Catch any uncaughtExceptions.  If an uncaughtException is caught, is it still uncaught? :-)
process.on('uncaughtException', exitHandler.bind(null, {
    exit: true
}));

/** Instantiate and invoke a composite accessor.
 *
 *  This function is useful for invoking the Node
 *  host on a composite accessor.
 *  This function calls process.exit() upon termination
 *  of the accessor.
 *
 *  @param args An array of command line arguments.
 *  For the values of the arguments, see the documentation
 *  for commonHost.processCommandLineArguments().
 */
function processCommandLineArguments(args) {
    // We use a simple version of this so that nodeHostInvoke.js and
    // ptolemy/cg/kernel/generic/accessor/accessorInvokeSSH in the
    // Cape Code AccessorSSHCodeGenerator are both very small and not
    // likely to change.  By having one function defined in the host,
    // we avoid code duplication.  nashornHost defines a similar method

    // This script is Node-specific because it uses fs.
    var result = commonHost.processCommandLineArguments(args,
        // Argument to read a file.
        function (filename) {
            // FIXME: What if the encoding is not utf8?
            return fs.readFileSync(filename, 'utf8');
        },
        // Argument to instantiate an accessor.
        instantiateTopLevel,
        // Function to call upon termination.
        function () {
            // Note that in the node host, an exit handler
            // will call wrapup on all accessors.
            process.exit(0);
        }
    );
    if (!result) {
        // No accessors were initialized and the keepalive argument
        // was not given, so there is presumably no more to do.
        console.log('No standalone accessors were instantiated');
        //process.exit(0);
    }
}

///////////////////////////////////////////////////////////////////////
// Export the module functions.

// Exported from this module:
exports.getAccessorCode = getAccessorCode;
exports.installIfMissingThenRequire = installIfMissingThenRequire;
exports.instantiate = instantiate;
exports.instantiateTopLevel = instantiateTopLevel;
exports.processCommandLineArguments = processCommandLineArguments;
exports.startHostShell = startHostShell;

// Exported from commonHost:
exports.Accessor = commonHost.Accessor;
exports.getTopLevelAccessors = commonHost.getTopLevelAccessors;
exports.isReifiableBy = commonHost.isReifiableBy;
exports.stopAllAccessors = commonHost.stopAllAccessors;
exports.uniqueName = commonHost.uniqueName;

// FIXME: Should not be needed:
//Make the Accessor constructor visible so that we may use it in the
//Cape Code Accessor Code Generator.
Accessor = commonHost.Accessor;

/**
 *  Below is the creation of a web server that retrieves all the accessors
 *  monitoring information and returns them as a JSON object.
 *
 *  In order to test this service, you need first to decomment the code below.
 *  After running your swarmlet on a node host, you can request from your
 *  browser a web page with the following URL: http://127.0.0.1:8082/monitor/
 *
 *  A JSON object is provided. It shows for each accessor: its name, its 'type'
 *  and all the monitoring information that is stored.
 */

/*var http = require('http');
var url = require('url');

// Create a server
http.createServer(function (request, response) {

        var reqParts = request.url.split("/");

        console.log(reqParts);

        if (reqParts[1] == "monitor") {
                // HTTP Status: 200 : OK
                // Content Type: text/plain
                response.writeHead(200, {'Content-Type': 'text/html'});
                // Write the content of the file to response body

                //console.log(commonHost.getMonitoringInformation());

                // Retrieve all monitoring information
                var allMonitoringInformation = commonHost.getMonitoringInformation();

                // Parse the elements and send them one by one
                Object.keys(allMonitoringInformation).forEach(function (accName) {
                        var accMonitoringInformation = {};
                        accMonitoringInformation[accName] = allMonitoringInformation[accName];
                        console.log(JSON.stringify(accMonitoringInformation));
                        response.write(JSON.stringify(accMonitoringInformation));
                });
        } else {
                response.writeHead(404, {'Content-Type': 'text/html'});
                response.write("Hello, nothing received information!");
        }
        // Send the response body
        response.end();

}).listen(8082);

// Console will print the message
console.log('Server running at http://127.0.0.1:8082/');
*/
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Accessors</h3><ul><li><a href="accessor-audio_AudioCapture.html">audio/AudioCapture</a></li><li><a href="accessor-audio_AudioPlayer.html">audio/AudioPlayer</a></li><li><a href="accessor-audio_ClipPlayer.html">audio/ClipPlayer</a></li><li><a href="accessor-audioIo_AudioIoCapture.html">audioIo/AudioIoCapture</a></li><li><a href="accessor-audioIo_AudioIoPlay.html">audioIo/AudioIoPlay</a></li><li><a href="accessor-audioIo_AudioIoWavFile.html">audioIo/AudioIoWavFile</a></li><li><a href="accessor-cameras_Camera.html">cameras/Camera</a></li><li><a href="accessor-cameras_Foscam.html">cameras/Foscam</a></li><li><a href="accessor-contextAware_contextAware.html">contextAware/contextAware</a></li><li><a href="accessor-contextAware_contextAwareTest.html">contextAware/contextAwareTest</a></li><li><a href="accessor-deterministicTemporalSemantics_SpontaneousAperiodic.html">deterministicTemporalSemantics/SpontaneousAperiodic</a></li><li><a href="accessor-deterministicTemporalSemantics_SpontaneousPeriodic.html">deterministicTemporalSemantics/SpontaneousPeriodic</a></li><li><a href="accessor-devices_AdsB.html">devices/AdsB</a></li><li><a href="accessor-devices_DrDose.html">devices/DrDose</a></li><li><a href="accessor-devices_EcSensor.html">devices/EcSensor</a></li><li><a href="accessor-devices_Hue.html">devices/Hue</a></li><li><a href="accessor-devices_Lifx.html">devices/Lifx</a></li><li><a href="accessor-devices_Moto360SensorListener.html">devices/Moto360SensorListener</a></li><li><a href="accessor-devices_PhSensor.html">devices/PhSensor</a></li><li><a href="accessor-geodesy_Lla2Ecef.html">geodesy/Lla2Ecef</a></li><li><a href="accessor-geodesy_LlaDist.html">geodesy/LlaDist</a></li><li><a href="accessor-HandlerWithSuppress.html">HandlerWithSuppress</a></li><li><a href="accessor-Hello.html">Hello</a></li><li><a href="accessor-image_AprilTags.html">image/AprilTags</a></li><li><a href="accessor-image_CharacterDetection.html">image/CharacterDetection</a></li><li><a href="accessor-image_ComputerVision.html">image/ComputerVision</a></li><li><a href="accessor-image_demo_TextFromCamera.html">image/demo/TextFromCamera</a></li><li><a href="accessor-image_FaceDetector.html">image/FaceDetector</a></li><li><a href="accessor-image_ImageAnnotate.html">image/ImageAnnotate</a></li><li><a href="accessor-image_ImageDisplay.html">image/ImageDisplay</a></li><li><a href="accessor-image_ImageFilter.html">image/ImageFilter</a></li><li><a href="accessor-image_MotionDetector.html">image/MotionDetector</a></li><li><a href="accessor-LifxAccessorTemplate.html">LifxAccessorTemplate</a></li><li><a href="accessor-localization_Location.html">localization/Location</a></li><li><a href="accessor-localization_mapRepo.html">localization/mapRepo</a></li><li><a href="accessor-mutable_MutableTestGain.html">mutable/MutableTestGain</a></li><li><a href="accessor-mutable_TestGain1.html">mutable/TestGain1</a></li><li><a href="accessor-mutable_TestGain2.html">mutable/TestGain2</a></li><li><a href="accessor-net_Discovery.html">net/Discovery</a></li><li><a href="accessor-net_IPAddress.html">net/IPAddress</a></li><li><a href="accessor-net_KeyValueStore.html">net/KeyValueStore</a></li><li><a href="accessor-net_MQTTPublisher.html">net/MQTTPublisher</a></li><li><a href="accessor-net_MQTTSubscriber.html">net/MQTTSubscriber</a></li><li><a href="accessor-net_REST.html">net/REST</a></li><li><a href="accessor-net_SecureCommClient.html">net/SecureCommClient</a></li><li><a href="accessor-net_SecureCommServer.html">net/SecureCommServer</a></li><li><a href="accessor-net_SecurePublisher.html">net/SecurePublisher</a></li><li><a href="accessor-net_SecureSubscriber.html">net/SecureSubscriber</a></li><li><a href="accessor-net_SerialPort.html">net/SerialPort</a></li><li><a href="accessor-net_TCPSocketClient.html">net/TCPSocketClient</a></li><li><a href="accessor-net_TCPSocketServer.html">net/TCPSocketServer</a></li><li><a href="accessor-net_UDPSocketListener.html">net/UDPSocketListener</a></li><li><a href="accessor-net_UDPSocketSender.html">net/UDPSocketSender</a></li><li><a href="accessor-net_VertxPublish.html">net/VertxPublish</a></li><li><a href="accessor-net_VertxSubscribe.html">net/VertxSubscribe</a></li><li><a href="accessor-net_WebServer.html">net/WebServer</a></li><li><a href="accessor-net_WebSocketClient.html">net/WebSocketClient</a></li><li><a href="accessor-net_WebSocketServer.html">net/WebSocketServer</a></li><li><a href="accessor-net_XBee.html">net/XBee</a></li><li><a href="accessor-PressureSensor.html">PressureSensor</a></li><li><a href="accessor-robotics_DroneLocation.html">robotics/DroneLocation</a></li><li><a href="accessor-robotics_GlobalPosition2LatLonAlt.html">robotics/GlobalPosition2LatLonAlt</a></li><li><a href="accessor-robotics_LocationRosPublisher.html">robotics/LocationRosPublisher</a></li><li><a href="accessor-robotics_RosPublisher.html">robotics/RosPublisher</a></li><li><a href="accessor-robotics_RosSubscriber.html">robotics/RosSubscriber</a></li><li><a href="accessor-robotics_Scarab.html">robotics/Scarab</a></li><li><a href="accessor-ROSTeleoperation.html">ROSTeleoperation</a></li><li><a href="accessor-services_FFT.html">services/FFT</a></li><li><a href="accessor-services_FINDLocation.html">services/FINDLocation</a></li><li><a href="accessor-services_GeoCoder.html">services/GeoCoder</a></li><li><a href="accessor-services_GeoLocation.html">services/GeoLocation</a></li><li><a href="accessor-services_Heartbeat.html">services/Heartbeat</a></li><li><a href="accessor-services_NaturalLanguage.html">services/NaturalLanguage</a></li><li><a href="accessor-services_RedPinLocation.html">services/RedPinLocation</a></li><li><a href="accessor-services_ReverseGeoCoder.html">services/ReverseGeoCoder</a></li><li><a href="accessor-services_SpeechRecognition.html">services/SpeechRecognition</a></li><li><a href="accessor-services_Weather.html">services/Weather</a></li><li><a href="accessor-services_WiFiScan.html">services/WiFiScan</a></li><li><a href="accessor-SoundActuator.html">SoundActuator</a></li><li><a href="accessor-TemperatureSensor.html">TemperatureSensor</a></li><li><a href="accessor-test_Test.html">test/Test</a></li><li><a href="accessor-test_TestAccessor.html">test/TestAccessor</a></li><li><a href="accessor-test_TestAdder.html">test/TestAdder</a></li><li><a href="accessor-test_TestBaseC.html">test/TestBaseC</a></li><li><a href="accessor-test_TestComposite.html">test/TestComposite</a></li><li><a href="accessor-test_TestCompositeSpontaneous.html">test/TestCompositeSpontaneous</a></li><li><a href="accessor-test_TestDerivedAgainA.html">test/TestDerivedAgainA</a></li><li><a href="accessor-test_TestDerivedC.html">test/TestDerivedC</a></li><li><a href="accessor-test_TestFunctions.html">test/TestFunctions</a></li><li><a href="accessor-test_TestGain.html">test/TestGain</a></li><li><a href="accessor-test_TestImplement.html">test/TestImplement</a></li><li><a href="accessor-test_TestInheritance.html">test/TestInheritance</a></li><li><a href="accessor-test_TestRequire.html">test/TestRequire</a></li><li><a href="accessor-test_TestSpontaneous.html">test/TestSpontaneous</a></li><li><a href="accessor-test_TestSpontaneousOnce.html">test/TestSpontaneousOnce</a></li><li><a href="accessor-test_TestWebSocketClient.html">test/TestWebSocketClient</a></li><li><a href="accessor-test_TrainableTest.html">test/TrainableTest</a></li><li><a href="accessor-TestDerivedC.html">TestDerivedC</a></li><li><a href="accessor-TrafficLight.html">TrafficLight</a></li><li><a href="accessor-trusted_AccessorStatus.html">trusted/AccessorStatus</a></li><li><a href="accessor-tutorial_Hello.html">tutorial/Hello</a></li><li><a href="accessor-util_GetResource.html">util/GetResource</a></li><li><a href="accessor-utilities_Clock.html">utilities/Clock</a></li><li><a href="accessor-utilities_Cron.html">utilities/Cron</a></li><li><a href="accessor-utilities_Exec.html">utilities/Exec</a></li><li><a href="accessor-utilities_LocalStorage.html">utilities/LocalStorage</a></li><li><a href="accessor-utilities_MutableBase.html">utilities/MutableBase</a></li><li><a href="accessor-utilities_Stop.html">utilities/Stop</a></li><li><a href="accessor-utilities_TextDisplay.html">utilities/TextDisplay</a></li><li><a href="accessor-VibrationSensor.html">VibrationSensor</a></li><li><a href="MessageBoard.accessor_js.html">js</a></li><li><a href="utilities_UserInterface.accessor_js.html">js</a></li></ul><h3>Modules</h3><ul><li><a href="module-@accessor-hosts_browser.html">@accessor-hosts/browser</a></li><li><a href="module-@accessors-hosts_browser_demo_tutorial.html">@accessors-hosts/browser/demo/tutorial</a></li><li><a href="module-@accessors-hosts_browser_test_regressionTestScript.html">@accessors-hosts/browser/test/regressionTestScript</a></li><li><a href="module-@accessors-hosts_common_deterministicTemporalSemantics.html">@accessors-hosts/common/deterministicTemporalSemantics</a></li><li><a href="module-@accessors-hosts_common_modules_hostHelper.html">@accessors-hosts/common/modules/hostHelper</a></li><li><a href="module-@accessors-hosts_common_modules_ontology.html">@accessors-hosts/common/modules/ontology</a></li><li><a href="module-@accessors-hosts_common_modules_util.html">@accessors-hosts/common/modules/util</a></li><li><a href="module-@accessors-hosts_common_sync-atom.html">@accessors-hosts/common/sync-atom</a></li><li><a href="module-@accessors-hosts_commonHost.html">@accessors-hosts/commonHost</a></li><li><a href="module-@accessors-hosts_duktapeHost.html">@accessors-hosts/duktapeHost</a></li><li><a href="module-@accessors-hosts_node_nodeHostInvoke.html">@accessors-hosts/node/nodeHostInvoke</a></li><li><a href="module-@accessors-hosts_node_nodeHostShell.html">@accessors-hosts/node/nodeHostShell</a></li><li><a href="module-@accessors-hosts_node_test_mocha_testNodeAllAuto.html">@accessors-hosts/node/test/mocha/testNodeAllAuto</a></li><li><a href="module-@accessors-hosts_node_test_testNodeAuto.html">@accessors-hosts/node/test/testNodeAuto</a></li><li><a href="module-@accessors-hosts_nodeHost.html">@accessors-hosts/nodeHost</a></li><li><a href="module-@accessors-modules_cameras.html">@accessors-modules/cameras</a></li><li><a href="module-@accessors-modules_discovery.html">@accessors-modules/discovery</a></li><li><a href="module-@accessors-modules_http-client.html">@accessors-modules/http-client</a></li><li><a href="module-@accessors-modules_http-server.html">@accessors-modules/http-server</a></li><li><a href="module-@accessors-modules_image-display.html">@accessors-modules/image-display</a></li><li><a href="module-@accessors-modules_iot-auth.html">@accessors-modules/iot-auth</a></li><li><a href="module-@accessors-modules_local-storage.html">@accessors-modules/local-storage</a></li><li><a href="module-@accessors-modules_serial.html">@accessors-modules/serial</a></li><li><a href="module-@accessors-modules_socket.html">@accessors-modules/socket</a></li><li><a href="module-@accessors-modules_text-display.html">@accessors-modules/text-display</a></li><li><a href="module-@accessors-modules_udp-socket.html">@accessors-modules/udp-socket</a></li><li><a href="module-@accessors-modules_web-socket-client.html">@accessors-modules/web-socket-client</a></li><li><a href="module-@accessors-modules_web-socket-server.html">@accessors-modules/web-socket-server</a></li><li><a href="module-accessorMap.html">accessorMap</a></li><li><a href="module-accessorMapCapeCode.html">accessorMapCapeCode</a></li><li><a href="module-aprilTags.html">aprilTags</a></li><li><a href="module-audio.html">audio</a></li><li><a href="module-ble.html">ble</a></li><li><a href="module-buffer.html">buffer</a></li><li><a href="module-camera.html">camera</a></li><li><a href="module-capeCodeHost.html">capeCodeHost</a></li><li><a href="module-computerVision.html">computerVision</a></li><li><a href="module-console.html">console</a></li><li><a href="module-contextAware.html">contextAware</a></li><li><a href="module-cordova_modules_util.html">cordova/modules/util</a></li><li><a href="module-cordovaHost.html">cordovaHost</a></li><li><a href="module-crypto.html">crypto</a></li><li><a href="module-dataConverter.html">dataConverter</a></li><li><a href="module-discovery.html">discovery</a></li><li><a href="module-dsp.html">dsp</a></li><li><a href="module-duktape_modules_util.html">duktape/modules/util</a></li><li><a href="module-eventbus.html">eventbus</a></li><li><a href="module-faceDetector.html">faceDetector</a></li><li><a href="module-geolocation.html">geolocation</a></li><li><a href="module-http-client.html">http-client</a></li><li><a href="module-httpServer.html">httpServer</a></li><li><a href="module-imageDisplay.html">imageDisplay</a></li><li><a href="module-imageFilters.html">imageFilters</a></li><li><a href="module-IMUSensor.html">IMUSensor</a></li><li><a href="module-iotAuth.html">iotAuth</a></li><li><a href="module-lib_interfaces_common.html">lib/interfaces/common</a></li><li><a href="module-localFunctions.html">localFunctions</a></li><li><a href="module-localStorage.html">localStorage</a></li><li><a href="module-motionDetector.html">motionDetector</a></li><li><a href="module-mqtt.html">mqtt</a></li><li><a href="module-nashornHost.html">nashornHost</a></li><li><a href="module-objectAssign.html">objectAssign</a></li><li><a href="module-os.html">os</a></li><li><a href="module-sampleStatus.html">sampleStatus</a></li><li><a href="module-serial.html">serial</a></li><li><a href="module-shell.html">shell</a></li><li><a href="module-simpleMutable.html">simpleMutable</a></li><li><a href="module-socket.html">socket</a></li><li><a href="module-speechRecognition.html">speechRecognition</a></li><li><a href="module-status.html">status</a></li><li><a href="module-textDisplay.html">textDisplay</a></li><li><a href="module-udpSocket.html">udpSocket</a></li><li><a href="module-userInterface.html">userInterface</a></li><li><a href="module-webSocket.html">webSocket</a></li><li><a href="module-webSocketClient.html">webSocketClient</a></li><li><a href="module-webSocketServer.html">webSocketServer</a></li><li><a href="module-wifiScanner.html">wifiScanner</a></li><li><a href="module-xbee.html">xbee</a></li><li><a href="swarmlet.module_js.html">js</a></li></ul><h3>Classes</h3><ul><li><a href="CoordinateSystem.html">CoordinateSystem</a></li><li><a href="Entity.html">Entity</a></li><li><a href="Map.html">Map</a></li><li><a href="MapSource.html">MapSource</a></li><li><a href="module-eventbus-VertxBus.html">VertxBus</a></li><li><a href="module-http-client-ClientRequest.html">ClientRequest</a></li><li><a href="module-http-client-IncomingMessage.html">IncomingMessage</a></li><li><a href="ObservationMetadata.html">ObservationMetadata</a></li><li><a href="Occupancy.html">Occupancy</a></li><li><a href="Placement.html">Placement</a></li><li><a href="Quaternion.html">Quaternion</a></li><li><a href="URL.html">URL</a></li></ul><h3>Namespaces</h3><ul><li><a href="addChainableMethod.html">addChainableMethod</a></li><li><a href="addMethod.html">addMethod</a></li><li><a href="addProperty.html">addProperty</a></li><li><a href="Assert.html">Assert</a></li><li><a href="BDD.html">BDD</a></li><li><a href="Expect.html">Expect</a></li><li><a href="expectTypes.html">expectTypes</a></li><li><a href="flag.html">flag</a></li><li><a href="getActual.html">getActual</a></li><li><a href="getEnumerableProperties.html">getEnumerableProperties</a></li><li><a href="getMessage.html">getMessage</a></li><li><a href="getName.html">getName</a></li><li><a href="getPathInfo.html">getPathInfo</a></li><li><a href="getPathValue.html">getPathValue</a></li><li><a href="getProperties.html">getProperties</a></li><li><a href="inspect.html">inspect</a></li><li><a href="overwriteChainableMethod.html">overwriteChainableMethod</a></li><li><a href="overwriteMethod.html">overwriteMethod</a></li><li><a href="overwriteProperty.html">overwriteProperty</a></li><li><a href="Should.html">Should</a></li><li><a href="test.html">test</a></li><li><a href="transferFlags.html">transferFlags</a></li><li><a href="Utils.html">Utils</a></li></ul><h3>Global</h3><ul><li><a href="global.html"></a></li><li><a href="global.html#addObserver">addObserver</a></li><li><a href="global.html#assert">assert</a></li><li><a href="global.html#clearRepo">clearRepo</a></li><li><a href="global.html#coordinateTransformationsToJSONString">coordinateTransformationsToJSONString</a></li><li><a href="global.html#coordinateTransformationsToString">coordinateTransformationsToString</a></li><li><a href="global.html#createApplication">createApplication</a></li><li><a href="global.html#createApplicationDeprecated">createApplicationDeprecated</a></li><li><a href="global.html#createApplicationNew">createApplicationNew</a></li><li><a href="global.html#decode">decode</a></li><li><a href="global.html#drawMap">drawMap</a></li><li><a href="global.html#entitiesToJSONString">entitiesToJSONString</a></li><li><a href="global.html#entitiesToString">entitiesToString</a></li><li><a href="global.html#EventEmitter">EventEmitter</a></li><li><a href="global.html#express">express</a></li><li><a href="global.html#extractProtocol">extractProtocol</a></li><li><a href="global.html#findSignpost">findSignpost</a></li><li><a href="global.html#getCoordinateTransformation">getCoordinateTransformation</a></li><li><a href="global.html#getResource">getResource</a></li><li><a href="global.html#getSignposts">getSignposts</a></li><li><a href="global.html#httpClient">httpClient</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#localRepoToJSONString">localRepoToJSONString</a></li><li><a href="global.html#lolcation">lolcation</a></li><li><a href="global.html#mapsToJSONString">mapsToJSONString</a></li><li><a href="global.html#mapsToString">mapsToString</a></li><li><a href="global.html#nodeHost">nodeHost</a></li><li><a href="global.html#parseDataAudio">parseDataAudio</a></li><li><a href="global.html#publish">publish</a></li><li><a href="global.html#query">query</a></li><li><a href="global.html#querystring">querystring</a></li><li><a href="global.html#querystringify">querystringify</a></li><li><a href="global.html#registerAndReact">registerAndReact</a></li><li><a href="global.html#registerCoordinateTransformation">registerCoordinateTransformation</a></li><li><a href="global.html#registerEntity">registerEntity</a></li><li><a href="global.html#registerMap">registerMap</a></li><li><a href="global.html#replaceRepo">replaceRepo</a></li><li><a href="global.html#resolve">resolve</a></li><li><a href="global.html#rules">rules</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setup">setup</a></li><li><a href="global.html#SpaceTypeEnum">SpaceTypeEnum</a></li><li><a href="global.html#startEddystoneURLBeacon">startEddystoneURLBeacon</a></li><li><a href="global.html#stop">stop</a></li><li><a href="global.html#stopAll">stopAll</a></li><li><a href="global.html">stringify</a></li><li><a href="global.html#subscribe">subscribe</a></li><li><a href="global.html#Testing">Testing</a></li><li><a href="global.html#toString">toString</a></li><li><a href="global.html#unpublish">unpublish</a></li><li><a href="global.html#unsubscribe">unsubscribe</a></li><li><a href="global.html#useSampleAudioData">useSampleAudioData</a></li><li><a href="global.html#useSampleRFData">useSampleRFData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.1-dev</a> on Fri Mar 16 2018 15:14:37 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
