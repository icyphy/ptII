<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="DataReadingExample" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.0.devel">
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Need DE director to fire Ptera model.  Doesn't seem to fire using SDF?">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[195.0, 40.0]">
        </property>
    </property>
    <property name="useOnlineData" class="ptolemy.data.expr.Parameter" value="false">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[200.0, 120.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 24, 1245, 724}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1017, 608]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.8">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{463.6610169491526, 1020.7627118644069}">
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This URL is for the power consumption of Cory Hall from 00:00 May 16 to 00:00 May 17.  &#10;">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 145.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The same data has been copied to the local file specified in LocalDataFileReader.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 1020.0]">
        </property>
    </property>
    <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="JSONtoToken returns an array of records; in this case, an array of one record.&#10;This record has fields Readings and uuid.&#10;The Readings field is an array of readings, where each reading is an array of two doubles, &#10;a timestamp and a sensor value.&#10;&#10;Currently the type on the JSONtoToken output port must be set manually.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 1050.0]">
        </property>
    </property>
    <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="http://new.openbms.org/backend/api/data/uuid/8737f287-14df-5ccd-82df-e66ca7374b63?start=1337140800000&amp;end=1337227200000">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 165.0]">
        </property>
    </property>
    <property name="Annotation6" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Implementation using a Ptera model.  Here, only one FileReader actor will fire, which is what we want.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[47.5, 200.0]">
        </property>
    </property>
    <property name="Annotation7" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Implementation using an Expression actor.  Both FileReaders will fire.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[61.75, 595.0]">
        </property>
    </property>
    <property name="Annotation8" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Problem using a class that contains a Ptera model?&#10;I'd like to use a class containing a Ptera model for the UCBPower demo.&#10;&#10;To recreate: &#10;Graph -&gt; Instantiate Entity&#10;Class name:  PteraClass&#10;Get error:&#10;Cannot find refinement with name &quot;ReadOnlineData&quot; in .PteraModalModel">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[47.5, 320.0]">
        </property>
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 75.0]">
        </property>
    </property>
    <property name="Annotation9" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Non-working implementation using a BooleanSwitch, BooleanSelect.&#10;The BooleanSelect is never ready to fire since one of its inputs will always be missing.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, 780.0]">
        </property>
    </property>
    <class name="PteraClass" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[177.5, 515.0]">
        </property>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={86, 429, 637, 262}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[621, 203]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[187.5, 85.0]">
            </property>
        </entity>
        <entity name="PteraModalModel" class="ptolemy.domains.ptera.kernel.PteraModalModel">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-37.5, 85.0]">
            </property>
            <port name="data" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.ptera.kernel.PteraController">
                <property name="_Director" class="ptolemy.domains.ptera.kernel.PteraDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                    </property>
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="A Ptera model is used here, since we only want one of the FileReader actors to fire.&#10;We don't want to try to read online data if the top-level parameter&#10;useOnlineData is false.  For example, if an internet connection is unavailable, &#10;the FileReader will throw an exception if it is fired and is reading from a URL.&#10;In this case we don't want this FileReader to fire.">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[225.0, 30.0]">
                    </property>
                </property>
                <port name="data" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 185.0]">
                    </property>
                </port>
                <entity name="Start" class="ptolemy.domains.ptera.kernel.Event">
                    <property name="isInitialEvent" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 50.0]">
                    </property>
                </entity>
                <entity name="ReadOnlineData" class="ptolemy.domains.ptera.kernel.Event">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ReadOnlineData">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 150.0]">
                    </property>
                </entity>
                <entity name="ReadOnlineData2" class="ptolemy.domains.ptera.kernel.Event">
                    <display name="ReadLocalData"/>
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ReadOnlineData2">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 150.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.ptera.kernel.SchedulingRelation">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="useOnlineData">
                        <display name="condition"/>
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.6231565966541202">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.ptera.kernel.SchedulingRelation">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="!useOnlineData">
                        <display name="condition"/>
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.898183215639708">
                    </property>
                </relation>
                <link port="Start.outgoingPort" relation="relation"/>
                <link port="Start.outgoingPort" relation="relation2"/>
                <link port="ReadOnlineData.incomingPort" relation="relation"/>
                <link port="ReadOnlineData2.incomingPort" relation="relation2"/>
            </entity>
            <entity name="ReadOnlineData" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{75, 40}">
                    </property>
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="SDF director iterations set to 1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 25.0]">
                    </property>
                </property>
                <port name="data" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 160.0]">
                    </property>
                </port>
                <entity name="OnlineDataFileReader" class="ptolemy.actor.lib.io.FileReader">
                    <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="http://new.openbms.org/backend/api/data/uuid/8737f287-14df-5ccd-82df-e66ca7374b63?start=1337140800000&amp;end=1337227200000">
                    </property>
                    <doc>Read an entire file and output as a string</doc>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 160.0]">
                    </property>
                </entity>
                <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute">
                    </property>
                    <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{225, 90}">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[180.0, 160.0]">
                    </vertex>
                </relation>
                <link port="data" relation="relation"/>
                <link port="OnlineDataFileReader.output" relation="relation"/>
                <link port="Display.input" relation="relation"/>
            </entity>
            <entity name="ReadOnlineData2" class="ptolemy.domains.modal.modal.Refinement">
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{95.0, 80.0}">
                    </property>
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="SDF director iterations set to 1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 60.0]">
                    </property>
                </property>
                <port name="data" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 210.0]">
                    </property>
                </port>
                <entity name="LocalDataFileReader" class="ptolemy.actor.lib.io.FileReader">
                    <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="$PTII/org/ptolemy/ptango/demo/UCBPower/data/CoryHallMay16toMay17.txt">
                    </property>
                    <doc>Read an entire file and output as a string</doc>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[115.0, 210.0]">
                    </property>
                </entity>
                <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={469, 269, 705, 262}, maximized=false}">
                    </property>
                    <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[689, 203]">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 135.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[200.0, 210.0]">
                    </vertex>
                </relation>
                <link port="data" relation="relation"/>
                <link port="LocalDataFileReader.output" relation="relation"/>
                <link port="Display.input" relation="relation"/>
            </entity>
            <relation name="dataRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <link port="data" relation="dataRelation"/>
            <link port="_Controller.data" relation="dataRelation"/>
            <link port="ReadOnlineData.data" relation="dataRelation"/>
            <link port="ReadOnlineData2.data" relation="dataRelation"/>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="Display.input" relation="relation"/>
        <link port="PteraModalModel.data" relation="relation"/>
    </class>
    <entity name="JSONToToken" class="ptolemy.actor.lib.conversions.json.JSONToToken">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[215.0, 1085.0]">
        </property>
        <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="arrayType({Readings = arrayType(arrayType(double)), uuid = string})">
            </property>
        </port>
    </entity>
    <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
        <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="data/CoryHallMay16toMay17.txt">
        </property>
        <doc>Read an entire file and output as a string</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[110.0, 1085.0]">
        </property>
    </entity>
    <entity name="Display2" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={86, 429, 637, 262}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[621, 203]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[700.0, 700.0]">
        </property>
    </entity>
    <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[440.0, 1210.0]">
        </property>
        <port name="Readings" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="uuid" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="ArrayToSequence" class="ptolemy.domains.sdf.lib.ArrayToSequence">
        <property name="enforceArrayLength" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[315.0, 1230.0]">
        </property>
    </entity>
    <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
        <doc>Iterate a contained actor over input arrays</doc>
        <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
        </property>
        <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
        </property>
        <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[640.0, 1220.0]">
        </property>
        <port name="Readings" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
            <property name="annotation" class="ptolemy.kernel.util.Attribute">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Make sure there is a director here!</text></svg></configure>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="-5.0, 5.0">
                </property>
            </property>
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 65.0]">
                </property>
                <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
                </property>
            </property>
            <property name="annotation2" class="ptolemy.kernel.util.Attribute">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Get the second element in the array (index 1) 
which is the sensor value.</text></svg></configure>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[0.0, 125.0]">
                </property>
            </property>
            <port name="Readings" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 210.0]">
                </property>
            </port>
            <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={313, 473, 359, 245}, maximized=false}">
                </property>
                <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[343, 186]">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[285.0, 220.0]">
                </property>
            </entity>
            <entity name="ArrayElement" class="ptolemy.actor.lib.ArrayElement">
                <property name="index" class="ptolemy.actor.parameters.PortParameter" value="1">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 220.0]">
                </property>
            </entity>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="Readings" relation="relation"/>
            <link port="Display.input" relation="relation2"/>
            <link port="ArrayElement.input" relation="relation"/>
            <link port="ArrayElement.output" relation="relation2"/>
        </entity>
    </entity>
    <entity name="PteraModalModel" class="ptolemy.domains.ptera.kernel.PteraModalModel">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[182.5, 275.0]">
        </property>
        <port name="data" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
        </port>
        <entity name="_Controller" class="ptolemy.domains.ptera.kernel.PteraController">
            <property name="_Director" class="ptolemy.domains.ptera.kernel.PteraDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{0.0, 0.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="A Ptera model is used here, since we only want one of the FileReader actors to fire.&#10;We don't want to try to read online data if the top-level parameter&#10;useOnlineData is false.  For example, if an internet connection is unavailable, &#10;the FileReader will throw an exception if it is fired and is reading from a URL.&#10;In this case we don't want this FileReader to fire.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[225.0, 30.0]">
                </property>
            </property>
            <port name="data" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 185.0]">
                </property>
            </port>
            <entity name="Start" class="ptolemy.domains.ptera.kernel.Event">
                <property name="isInitialEvent" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 50.0]">
                </property>
            </entity>
            <entity name="ReadOnlineData" class="ptolemy.domains.ptera.kernel.Event">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ReadOnlineData">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 150.0]">
                </property>
            </entity>
            <entity name="ReadOnlineData2" class="ptolemy.domains.ptera.kernel.Event">
                <display name="ReadLocalData"/>
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="ReadOnlineData2">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 150.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.domains.ptera.kernel.SchedulingRelation">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="useOnlineData">
                    <display name="condition"/>
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.6231565966541202">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.ptera.kernel.SchedulingRelation">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="!useOnlineData">
                    <display name="condition"/>
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.898183215639708">
                </property>
            </relation>
            <link port="Start.outgoingPort" relation="relation"/>
            <link port="Start.outgoingPort" relation="relation2"/>
            <link port="ReadOnlineData.incomingPort" relation="relation"/>
            <link port="ReadOnlineData2.incomingPort" relation="relation2"/>
        </entity>
        <entity name="ReadOnlineData" class="ptolemy.domains.modal.modal.Refinement">
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{75, 40}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="SDF director iterations set to 1">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 25.0]">
                </property>
            </property>
            <port name="data" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 160.0]">
                </property>
            </port>
            <entity name="OnlineDataFileReader" class="ptolemy.actor.lib.io.FileReader">
                <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="http://new.openbms.org/backend/api/data/uuid/8737f287-14df-5ccd-82df-e66ca7374b63?start=1337140800000&amp;end=1337227200000">
                </property>
                <doc>Read an entire file and output as a string</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 160.0]">
                </property>
            </entity>
            <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute">
                </property>
                <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{225, 90}">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[180.0, 160.0]">
                </vertex>
            </relation>
            <link port="data" relation="relation"/>
            <link port="OnlineDataFileReader.output" relation="relation"/>
            <link port="Display.input" relation="relation"/>
        </entity>
        <entity name="ReadOnlineData2" class="ptolemy.domains.modal.modal.Refinement">
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="iterations" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{95.0, 80.0}">
                </property>
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="SDF director iterations set to 1">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 60.0]">
                </property>
            </property>
            <port name="data" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 210.0]">
                </property>
            </port>
            <entity name="LocalDataFileReader" class="ptolemy.actor.lib.io.FileReader">
                <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="$PTII/org/ptolemy/ptango/demo/UCBPower/data/CoryHallMay16toMay17.txt">
                </property>
                <doc>Read an entire file and output as a string</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[115.0, 210.0]">
                </property>
            </entity>
            <entity name="Display" class="ptolemy.actor.lib.gui.Display">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={115, 138, 705, 262}, maximized=false}">
                </property>
                <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[689, 203]">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 135.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[200.0, 210.0]">
                </vertex>
            </relation>
            <link port="data" relation="relation"/>
            <link port="LocalDataFileReader.output" relation="relation"/>
            <link port="Display.input" relation="relation"/>
        </entity>
        <relation name="dataRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <link port="data" relation="dataRelation"/>
        <link port="_Controller.data" relation="dataRelation"/>
        <link port="ReadOnlineData.data" relation="dataRelation"/>
        <link port="ReadOnlineData2.data" relation="dataRelation"/>
    </entity>
    <entity name="Display3" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={535, 168, 342, 262}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[326, 203]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[770.0, 890.0]">
        </property>
    </entity>
    <entity name="Display" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={86, 429, 637, 262}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[621, 203]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[465.0, 275.0]">
        </property>
    </entity>
    <entity name="LocalDataFileReader" class="ptolemy.actor.lib.io.FileReader">
        <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="data/CoryHallMay16toMay17.txt">
        </property>
        <doc>Read an entire file and output as a string</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{465.0, 930.0}">
        </property>
    </entity>
    <entity name="OnlineDataFileReader" class="ptolemy.actor.lib.io.FileReader">
        <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="http://new.openbms.org/backend/api/data/uuid/8737f287-14df-5ccd-82df-e66ca7374b63?start=1337140800000&amp;end=1337227200000">
        </property>
        <doc>Read an entire file and output as a string</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[464.5, 866.5]">
        </property>
    </entity>
    <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[312.75, 911.5]">
        </property>
    </entity>
    <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 690.0]">
        </property>
    </entity>
    <entity name="Const" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="useOnlineData">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[222.75, 971.5]">
        </property>
    </entity>
    <entity name="BooleanSelect" class="ptolemy.actor.lib.BooleanSelect">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[645.0, 890.0]">
        </property>
    </entity>
    <entity name="Const2" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="useOnlineData">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[590.0, 980.0]">
        </property>
    </entity>
    <entity name="SingleEvent2" class="ptolemy.actor.lib.SingleEvent">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 875.0]">
        </property>
    </entity>
    <entity name="OnlineDataFileReader2" class="ptolemy.actor.lib.io.FileReader">
        <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="http://new.openbms.org/backend/api/data/uuid/8737f287-14df-5ccd-82df-e66ca7374b63?start=1337140800000&amp;end=1337227200000">
        </property>
        <doc>Read an entire file and output as a string</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 660.0]">
        </property>
    </entity>
    <entity name="LocalDataFileReader2" class="ptolemy.actor.lib.io.FileReader">
        <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="data/CoryHallMay16toMay17.txt">
        </property>
        <doc>Read an entire file and output as a string</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 735.0]">
        </property>
    </entity>
    <entity name="Expression" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="useOnlineData ? online : local">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 700.0]">
        </property>
        <port name="online" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="local" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="Display4" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={86, 429, 637, 262}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[621, 203]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 1085.0]">
        </property>
    </entity>
    <entity name="SingleEvent3" class="ptolemy.actor.lib.SingleEvent">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 1075.0]">
        </property>
    </entity>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[315.0, 1085.0]">
        </vertex>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[167.75, 861.5]">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
        </property>
        <vertex name="vertex1" value="[185.0, 690.0]">
        </vertex>
    </relation>
    <relation name="relation15" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation16" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation17" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation18" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="JSONToToken.input" relation="relation4"/>
    <link port="JSONToToken.output" relation="relation6"/>
    <link port="FileReader.output" relation="relation4"/>
    <link port="FileReader.trigger" relation="relation18"/>
    <link port="Display2.input" relation="relation17"/>
    <link port="RecordDisassembler.input" relation="relation5"/>
    <link port="RecordDisassembler.Readings" relation="relation7"/>
    <link port="ArrayToSequence.input" relation="relation6"/>
    <link port="ArrayToSequence.output" relation="relation5"/>
    <link port="IterateOverArray.Readings" relation="relation7"/>
    <link port="PteraModalModel.data" relation="relation8"/>
    <link port="Display3.input" relation="relation12"/>
    <link port="Display.input" relation="relation8"/>
    <link port="LocalDataFileReader.output" relation="relation3"/>
    <link port="LocalDataFileReader.trigger" relation="relation10"/>
    <link port="OnlineDataFileReader.output" relation="relation2"/>
    <link port="OnlineDataFileReader.trigger" relation="relation9"/>
    <link port="BooleanSwitch.input" relation="relation13"/>
    <link port="BooleanSwitch.control" relation="relation11"/>
    <link port="BooleanSwitch.trueOutput" relation="relation9"/>
    <link port="BooleanSwitch.falseOutput" relation="relation10"/>
    <link port="SingleEvent.output" relation="relation14"/>
    <link port="Const.output" relation="relation11"/>
    <link port="Const.trigger" relation="relation13"/>
    <link port="BooleanSelect.trueInput" relation="relation2"/>
    <link port="BooleanSelect.falseInput" relation="relation3"/>
    <link port="BooleanSelect.control" relation="relation"/>
    <link port="BooleanSelect.output" relation="relation12"/>
    <link port="Const2.output" relation="relation"/>
    <link port="SingleEvent2.output" relation="relation13"/>
    <link port="OnlineDataFileReader2.output" relation="relation16"/>
    <link port="OnlineDataFileReader2.trigger" relation="relation14"/>
    <link port="LocalDataFileReader2.output" relation="relation15"/>
    <link port="LocalDataFileReader2.trigger" relation="relation14"/>
    <link port="Expression.output" relation="relation17"/>
    <link port="Expression.online" relation="relation16"/>
    <link port="Expression.local" relation="relation15"/>
    <link port="Display4.input" relation="relation6"/>
    <link port="SingleEvent3.output" relation="relation18"/>
</entity>
