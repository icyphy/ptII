<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="RijndaelEncryption" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.0.beta">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[546, 502]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
    </property>
    <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
        <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
        </property>
        <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
        </property>
        <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="A model of the rijndael encryption system, operating in ECB mode.&#10;This model makes heavy use of the class mechanism in Ptolemy II&#10;to describe components that are instantiated multiple times in the model.&#10;&#10;The algorithm is parameterized to run on 128 bits of data at a time.&#10;Executing the model displays two windows of data in hex format.&#10;One window shows 128 bits of encrypted data, while the other displays &#10;intermediate results in the encryption process after each 'round'">
            <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 240.0}">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={209, 22, 761, 609}, maximized=false}">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{273.0, 251.0}">
    </property>
    <property name="AnnotationUpdated2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
        <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
        </property>
        <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
        </property>
        <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The convertToString algorithm (with blue halo)&#10;is defined here as a single model that is &#10;instantiated multiple times.  This class definition &#10;is local to the model and stored in the same &#10;XML file.  Modifications to this class will propagate&#10;to all instances.">
            <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{185.0, 15.0}">
        </property>
    </property>
    <property name="AnnotationUpdated3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
        <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.2, 0.2, 0.2, 1.0}">
        </property>
        <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
        </property>
        <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Author: Stephen Neuendorffer">
            <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 460.0}">
        </property>
    </property>
    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
        <property name="iterations" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{80.0, 45.0}">
        </property>
    </property>
    <class name="convertToStringClass" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 120.0]">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[706, 491]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
        </property>
        <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
            <property name="_location" class="ptolemy.kernel.util.Location" value="80.0, 60.0">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {30, 138, 921, 600}, maximized = false}">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{353.0, 245.5}">
        </property>
        <property name="annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model describes how a sequence of bytes are converted to a string, &#10;one byte at a time.  Each byte is padded to two hex digits.  Note that &#10;the title bar of the model indicates that this is the convertToStringClass &#10;model, regardless of whether this window was opened by looking inside the &#10;icon representing the class itself, or by looking inside one of the &#10;instances of the class.  &#10;&#10;Note that any changes to this class will be reflected in the behavior of all &#10;instances, although individual instances may override particular parameter values.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 20.0]">
            </property>
        </property>
        <port name="port" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 230.0]">
            </property>
        </port>
        <port name="port2" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[670.0, 335.0]">
            </property>
        </port>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="toHexString(input)">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 230.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
                </property>
            </port>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
            </port>
        </entity>
        <entity name="Accumulator" class="ptolemy.actor.lib.Accumulator">
            <property name="init" class="ptolemy.data.expr.Parameter" value="&quot;&quot;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[465.0, 240.0]">
            </property>
        </entity>
        <entity name="DownSample" class="ptolemy.domains.sdf.lib.DownSample">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="16">
            </property>
            <property name="DownSampleIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 240.0]">
            </property>
        </entity>
        <entity name="SampleDelay" class="ptolemy.domains.sdf.lib.SampleDelay">
            <property name="initialOutputs" class="ptolemy.data.expr.Parameter" value="{true}">
            </property>
            <doc>The sdf delay actor, which behaves as an initial token on an arc.</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 295.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <doc>Create a constant sequence</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, 295.0]">
            </property>
        </entity>
        <entity name="UpSample" class="ptolemy.domains.sdf.lib.UpSample">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="16">
            </property>
            <property name="phase" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="UpSampleIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[360.0, 295.0]">
            </property>
        </entity>
        <entity name="PadToTwoChars" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(&quot;00&quot; + input).substring(input.length())">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[290.0, 230.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute">
                </property>
            </port>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute">
                </property>
            </port>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[635.0, 335.0]">
            </vertex>
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="port" relation="relation2"/>
        <link port="port2" relation="relation5"/>
        <link port="Expression.output" relation="relation8"/>
        <link port="Expression.input" relation="relation2"/>
        <link port="Accumulator.input" relation="relation"/>
        <link port="Accumulator.output" relation="relation3"/>
        <link port="Accumulator.reset" relation="relation4"/>
        <link port="DownSample.input" relation="relation3"/>
        <link port="DownSample.output" relation="relation5"/>
        <link port="SampleDelay.input" relation="relation6"/>
        <link port="SampleDelay.output" relation="relation7"/>
        <link port="Const.output" relation="relation6"/>
        <link port="Const.trigger" relation="relation5"/>
        <link port="UpSample.input" relation="relation7"/>
        <link port="UpSample.output" relation="relation4"/>
        <link port="PadToTwoChars.output" relation="relation"/>
        <link port="PadToTwoChars.input" relation="relation8"/>
    </class>
    <entity name="rijndael" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="{195.0, 205.0}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[781, 567]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[104, 127]">
        </property>
        <property name="key" class="ptolemy.data.expr.Parameter" value="{0x00ub,0x01ub,0x02ub,0x03ub,0x04ub,0x05ub,0x06ub,0x07ub,0x08ub,0x09ub,0x0aub,0x0bub,0x0cub,0x0dub,0x0eub,0x0fub}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 285.0]">
            </property>
        </property>
        <property name="roundCount" class="ptolemy.data.expr.Parameter" value="10">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, 305.0]">
            </property>
        </property>
        <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
            <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
            </property>
            <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model implements the rijndael block encryption algorithm.&#10;It consumes a block of 128 bits, encrypts it, and then outputs 128 encrypted bits.&#10;The 128 bit key to be used is specified by the key parameter (an array of unsigned bytes)&#10;The roundCount parameter gives the number of cipher rounds that should be performed,&#10;and should be 10 for 128 bit data and 128 bit key.&#10;&#10;Note that this model contains another instance of the convertToString class defined&#10;at the toplevel, as well as three more class definitions that are used by various&#10;internal models.">
                <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                    </property>
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, -100.0}">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 1, 996, 674}, maximized=false}">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{390.5, 283.5}">
        </property>
        <property name="DDF Director" class="ptolemy.domains.ddf.kernel.DDFDirector">
            <property name="iterations" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 110.0]">
            </property>
        </property>
        <port name="text" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 180.0]">
            </property>
            <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="16">
            </property>
        </port>
        <port name="cipher" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[405.0, 180.0]">
            </property>
            <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="16">
            </property>
        </port>
        <class name="Sbox" extends="ptolemy.actor.lib.LookupTable">
            <property name="table" class="ptolemy.data.expr.Parameter" value="{99ub, 124ub, 119ub, 123ub, 242ub, 107ub, 111ub, 197ub,  48ub,   1ub, 103ub,  43ub, 254ub, 215ub, 171ub, 118ub, 202ub, 130ub, 201ub, 125ub, 250ub,  89ub,  71ub, 240ub, 173ub, 212ub, 162ub, 175ub, 156ub, 164ub, 114ub, 192ub, 183ub, 253ub, 147ub,  38ub,  54ub,  63ub, 247ub, 204ub,  52ub, 165ub, 229ub, 241ub, 113ub, 216ub,  49ub,  21ub,   4ub, 199ub,  35ub, 195ub,  24ub, 150ub,   5ub, 154ub,   7ub,  18ub, 128ub, 226ub, 235ub,  39ub, 178ub, 117ub,   9ub, 131ub,  44ub,  26ub,  27ub, 110ub,  90ub, 160ub,  82ub,  59ub, 214ub, 179ub,  41ub, 227ub,  47ub, 132ub,  83ub, 209ub,   0ub, 237ub,  32ub, 252ub, 177ub,  91ub, 106ub, 203ub, 190ub,  57ub,  74ub,  76ub,  88ub, 207ub, 208ub, 239ub, 170ub, 251ub,  67ub,  77ub,  51ub, 133ub,  69ub, 249ub,   2ub, 127ub,  80ub,  60ub, 159ub, 168ub,  81ub, 163ub,  64ub, 143ub, 146ub, 157ub,  56ub, 245ub, 188ub, 182ub, 218ub,  33ub,  16ub, 255ub, 243ub, 210ub, 205ub,  12ub,  19ub, 236ub,  95ub, 151ub,  68ub,  23ub, 196ub, 167ub, 126ub,  61ub, 100ub,  93ub,  25ub, 115ub,  96ub, 129ub,  79ub, 220ub,  34ub,  42ub, 144ub, 136ub,  70ub, 238ub, 184ub,  20ub, 222ub,  94ub,  11ub, 219ub, 224ub,  50ub,  58ub,  10ub,  73ub,   6ub,  36ub,  92ub, 194ub, 211ub, 172ub,  98ub, 145ub, 149ub, 228ub, 121ub, 231ub, 200ub,  55ub, 109ub, 141ub, 213ub,  78ub, 169ub, 108ub,  86ub, 244ub, 234ub, 101ub, 122ub, 174ub,   8ub, 186ub, 120ub,  37ub,  46ub,  28ub, 166ub, 180ub, 198ub, 232ub, 221ub, 116ub,  31ub,  75ub, 189ub, 139ub, 138ub, 112ub,  62ub, 181ub, 102ub,  72ub,   3ub, 246ub,  14ub,  97ub,  53ub,  87ub, 185ub, 134ub, 193ub,  29ub, 158ub, 225ub, 248ub, 152ub,  17ub, 105ub, 217ub, 142ub, 148ub, 155ub,  30ub, 135ub, 233ub, 206ub,  85ub,  40ub, 223ub, 140ub, 161ub, 137ub,  13ub, 191ub, 230ub,  66ub, 104ub,  65ub, 153ub,  45ub,  15ub, 176ub,  84ub, 187ub,  22ub} ">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 115.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="unsignedByte">
                </property>
            </port>
        </class>
        <class name="Shift Row" extends="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 115.0]">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
            </property>
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="50.0, 220.0">
                </property>
            </property>
            <port name="port" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="15.0, 295.0">
                </property>
            </port>
            <port name="port2" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="740.0, 310.0">
                </property>
            </port>
            <entity name="SequenceToArray" class="ptolemy.domains.sdf.lib.SequenceToArray">
                <property name="arrayLength" class="ptolemy.actor.parameters.PortParameter" value="4">
                </property>
                <property name="SequenceToArrayIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="70.0, 305.0">
                </property>
            </entity>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="{a1(0),a2(1),a3(2),a4(3),a2(0),a3(1),a4(2),a1(3),a3(0),a4(1),a1(2),a2(3),a4(0),a1(1),a2(2),a3(3)}">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="430.0, 305.0">
                </property>
                <port name="a1" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="a2" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="a3" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="a4" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="Distributor" class="ptolemy.actor.lib.Distributor">
                <property name="DistributorIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {171, 219, 815, 516}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="190.0, 305.0">
                </property>
            </entity>
            <entity name="ArrayToSequence" class="ptolemy.domains.sdf.lib.ArrayToSequence">
                <property name="arrayLength" class="ptolemy.data.expr.Parameter" value="16">
                </property>
                <property name="ArrayToSequenceIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="665.0, 305.0">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="port" relation="relation7"/>
            <link port="port2" relation="relation8"/>
            <link port="SequenceToArray.input" relation="relation7"/>
            <link port="SequenceToArray.output" relation="relation4"/>
            <link port="Expression.output" relation="relation5"/>
            <link port="Expression.a1" relation="relation"/>
            <link port="Expression.a2" relation="relation3"/>
            <link port="Expression.a3" relation="relation6"/>
            <link port="Expression.a4" relation="relation2"/>
            <link port="Distributor.input" relation="relation4"/>
            <link port="Distributor.output" relation="relation"/>
            <link port="Distributor.output" relation="relation3"/>
            <link port="Distributor.output" relation="relation6"/>
            <link port="Distributor.output" relation="relation2"/>
            <link port="ArrayToSequence.input" relation="relation5"/>
            <link port="ArrayToSequence.output" relation="relation8"/>
        </class>
        <class name="Mix Column" extends="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[405.0, 115.0]">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[810, 564]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
            </property>
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 110.0]">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {-1, 83, 1022, 673}, maximized = false}">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{366.625, 309.0037878787879}">
            </property>
            <port name="port" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[11.866455078125, 318.175048828125]">
                </property>
            </port>
            <port name="port2" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[740.0, 320.0]">
                </property>
            </port>
            <class name="MulTwo" extends="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 175.0]">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <port name="port" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="20.0, 200.0">
                    </property>
                </port>
                <port name="port2" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="580.0, 200.0">
                    </property>
                </port>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a &gt; 127 ? (a &lt;&lt; 1) # 27ub : (a &lt;&lt; 1)">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="180.0, 200.0">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="port" relation="relation"/>
                <link port="port2" relation="relation2"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.a" relation="relation"/>
            </class>
            <class name="MulThree" extends="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 240.0]">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <port name="port" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="20.0, 200.0">
                    </property>
                </port>
                <port name="port2" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="580.0, 200.0">
                    </property>
                </port>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(a &gt; 127 ? (a &lt;&lt; 1) # 27ub : (a &lt;&lt; 1)) # a">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="180.0, 200.0">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="port" relation="relation"/>
                <link port="port2" relation="relation2"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.a" relation="relation"/>
            </class>
            <entity name="Distributor" class="ptolemy.actor.lib.Distributor">
                <property name="DistributorIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {171, 219, 815, 516}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[91.866455078125, 318.175048828125]">
                </property>
            </entity>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a#b#c#d">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="595.0, 165.0">
                </property>
                <port name="a" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="c" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="d" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="Expression2" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a#b#c#d">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="595.0, 275.0">
                </property>
                <port name="a" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="c" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="d" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="Expression3" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a#b#c#d">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="595.0, 370.0">
                </property>
                <port name="a" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="c" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="d" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="Expression4" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a#b#c#d">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="595.0, 475.0">
                </property>
                <port name="a" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="c" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="d" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="Commutator" class="ptolemy.actor.lib.Commutator">
                <property name="CommutatorIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {46, 101, 815, 516}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 320.0]">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="tokenProductionRate" class="ptolemy.actor.lib.Commutator$WidthDependentParameter" value="4 * blockSize">
                    </property>
                </port>
            </entity>
            <entity name="InstanceOfMulTwo" class="MulTwo">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 115.0">
                </property>
            </entity>
            <entity name="InstanceOfMulTwo2" class="MulTwo">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 235.0">
                </property>
            </entity>
            <entity name="InstanceOfMulThree2" class="MulThree">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 295.0">
                </property>
            </entity>
            <entity name="InstanceOfMulTwo3" class="MulTwo">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 355.0">
                </property>
            </entity>
            <entity name="InstanceOfMulThree3" class="MulThree">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 415.0">
                </property>
            </entity>
            <entity name="InstanceOfMulTwo4" class="MulTwo">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 475.0">
                </property>
            </entity>
            <entity name="InstanceOfMulThree4" class="MulThree">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 535.0">
                </property>
            </entity>
            <entity name="InstanceOfMulThree" class="MulThree">
                <property name="_location" class="ptolemy.kernel.util.Location" value="295.0, 175.0">
                </property>
            </entity>
            <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[165.0, 140.0]">
                </vertex>
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[205.0, 260.0]">
                </vertex>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[205.0, 380.0]">
                </vertex>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[165.0, 500.0]">
                </vertex>
            </relation>
            <relation name="relation14" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation15" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation17" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation18" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation10" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation13" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation11" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation12" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="port" relation="relation4"/>
            <link port="port2" relation="relation14"/>
            <link port="Distributor.input" relation="relation4"/>
            <link port="Distributor.output" relation="relation"/>
            <link port="Distributor.output" relation="relation2"/>
            <link port="Distributor.output" relation="relation3"/>
            <link port="Distributor.output" relation="relation5"/>
            <link port="Expression.output" relation="relation15"/>
            <link port="Expression.a" relation="relation6"/>
            <link port="Expression.b" relation="relation8"/>
            <link port="Expression.c" relation="relation3"/>
            <link port="Expression.d" relation="relation5"/>
            <link port="Expression2.output" relation="relation16"/>
            <link port="Expression2.a" relation="relation"/>
            <link port="Expression2.b" relation="relation7"/>
            <link port="Expression2.c" relation="relation9"/>
            <link port="Expression2.d" relation="relation5"/>
            <link port="Expression3.output" relation="relation17"/>
            <link port="Expression3.a" relation="relation"/>
            <link port="Expression3.b" relation="relation2"/>
            <link port="Expression3.c" relation="relation10"/>
            <link port="Expression3.d" relation="relation11"/>
            <link port="Expression4.output" relation="relation18"/>
            <link port="Expression4.a" relation="relation12"/>
            <link port="Expression4.b" relation="relation2"/>
            <link port="Expression4.c" relation="relation3"/>
            <link port="Expression4.d" relation="relation13"/>
            <link port="Commutator.input" relation="relation15"/>
            <link port="Commutator.input" relation="relation16"/>
            <link port="Commutator.input" relation="relation17"/>
            <link port="Commutator.input" relation="relation18"/>
            <link port="Commutator.output" relation="relation14"/>
            <link port="InstanceOfMulTwo.port" relation="relation"/>
            <link port="InstanceOfMulTwo.port2" relation="relation6"/>
            <link port="InstanceOfMulTwo2.port" relation="relation2"/>
            <link port="InstanceOfMulTwo2.port2" relation="relation7"/>
            <link port="InstanceOfMulThree2.port" relation="relation2"/>
            <link port="InstanceOfMulThree2.port2" relation="relation8"/>
            <link port="InstanceOfMulTwo3.port" relation="relation3"/>
            <link port="InstanceOfMulTwo3.port2" relation="relation10"/>
            <link port="InstanceOfMulThree3.port" relation="relation3"/>
            <link port="InstanceOfMulThree3.port2" relation="relation9"/>
            <link port="InstanceOfMulTwo4.port" relation="relation5"/>
            <link port="InstanceOfMulTwo4.port2" relation="relation13"/>
            <link port="InstanceOfMulThree4.port" relation="relation5"/>
            <link port="InstanceOfMulThree4.port2" relation="relation11"/>
            <link port="InstanceOfMulThree.port" relation="relation"/>
            <link port="InstanceOfMulThree.port2" relation="relation12"/>
        </class>
        <entity name="RoundKeyGenerator" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[110.0, 235.0]">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[679, 402]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
            </property>
            <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="{95.0, 175.0}">
                </property>
            </property>
            <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                </property>
                <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
                <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
                </property>
                <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
                </property>
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This block implements the key expansion and key selection.&#10;It basically implements a random number generator that uses&#10;the 128 bit user key as a seed.">
                    <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                        <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                        </property>
                        <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                        </property>
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{45.0, 420.0}">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={58, 90, 894, 509}, maximized=false}">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{354.6414141414142, 308.2588383838384}">
            </property>
            <port name="round key" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="377.5, 375.0">
                </property>
            </port>
            <class name="MulTwo" extends="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="220.0, 175.0">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="75.0, 110.0">
                    </property>
                </property>
                <port name="port" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="20.0, 200.0">
                    </property>
                </port>
                <port name="port2" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="580.0, 200.0">
                    </property>
                </port>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a &gt; 127 ? (a &lt;&lt; 1) # 27ub : (a &lt;&lt; 1)">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="270.0, 200.0">
                    </property>
                    <port name="a" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="port" relation="relation"/>
                <link port="port2" relation="relation2"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.a" relation="relation"/>
            </class>
            <class name="rotate bytes" extends="ptolemy.actor.TypedCompositeActor">
                <property name="_location" class="ptolemy.kernel.util.Location" value="305.0, 175.0">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[446, 350]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="75.0, 90.0">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={270, 154, 661, 457}, maximized=false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{223.0, 175.0}">
                </property>
                <port name="port" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="20.0, 200.0">
                    </property>
                    <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="4">
                    </property>
                </port>
                <port name="port2" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="420.0, 195.0">
                    </property>
                    <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="4">
                    </property>
                    <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                    </property>
                </port>
                <entity name="Distributor" class="ptolemy.actor.lib.Distributor">
                    <property name="DistributorIcon" class="ptolemy.vergil.icon.EditorIcon">
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {171, 219, 815, 516}, maximized = false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="135.0, 200.0">
                    </property>
                </entity>
                <entity name="Commutator" class="ptolemy.actor.lib.Commutator">
                    <property name="CommutatorIcon" class="ptolemy.vergil.icon.EditorIcon">
                        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {46, 101, 815, 516}, maximized = false}">
                        </property>
                        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 195.0">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="tokenProductionRate" class="ptolemy.actor.lib.Commutator$WidthDependentParameter" value="4 * blockSize">
                        </property>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="235.0, 160.0">
                    </vertex>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="{235.0, 190.0}">
                    </vertex>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="235.0, 220.0">
                    </vertex>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="width" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <vertex name="vertex1" value="235.0, 250.0">
                    </vertex>
                </relation>
                <link port="port" relation="relation"/>
                <link port="port2" relation="relation2"/>
                <link port="Distributor.input" relation="relation"/>
                <link port="Distributor.output" relation="relation3"/>
                <link port="Distributor.output" relation="relation4"/>
                <link port="Distributor.output" relation="relation5"/>
                <link port="Distributor.output" relation="relation6"/>
                <link port="Commutator.input" relation="relation4"/>
                <link port="Commutator.input" relation="relation5"/>
                <link port="Commutator.input" relation="relation6"/>
                <link port="Commutator.input" relation="relation3"/>
                <link port="Commutator.output" relation="relation2"/>
            </class>
            <entity name="Expression" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a#b">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[540.0, 325.0]">
                </property>
                <port name="a" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="b" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="SequenceToArray" class="ptolemy.domains.sdf.lib.SequenceToArray">
                <property name="arrayLength" class="ptolemy.actor.parameters.PortParameter" value="4">
                </property>
                <property name="SequenceToArrayIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 260.0]">
                </property>
            </entity>
            <entity name="SampleDelay" class="ptolemy.domains.sdf.lib.SampleDelay">
                <property name="initialOutputs" class="ptolemy.data.expr.Parameter" value="{key(0),key(1),key(2),key(3),key(4),key(5),key(6),key(7),key(8),key(9),key(10),key(11)}">
                </property>
                <doc>The sdf delay actor, which behaves as an initial token on an arc.</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="192.5, 335.0">
                </property>
            </entity>
            <entity name="SampleDelay2" class="ptolemy.domains.sdf.lib.SampleDelay">
                <property name="initialOutputs" class="ptolemy.data.expr.Parameter" value="{key(12),key(13),key(14),key(15)}">
                </property>
                <doc>The sdf delay actor, which behaves as an initial token on an arc.</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="82.5, 250.0">
                </property>
            </entity>
            <entity name="ArrayToSequence" class="ptolemy.domains.sdf.lib.ArrayToSequence">
                <property name="arrayLength" class="ptolemy.data.expr.Parameter" value="4">
                </property>
                <property name="ArrayToSequenceIcon" class="ptolemy.vergil.icon.EditorIcon">
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[472.5, 260.0]">
                </property>
            </entity>
            <entity name="Scale" class="ptolemy.actor.lib.Scale">
                <property name="factor" class="ptolemy.data.expr.Parameter" value="1ub">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="287.5, 335.0">
                </property>
            </entity>
            <entity name="modal model" class="ptolemy.domains.fsm.modal.ModalModel">
                <property name="_tableauFactory" class="ptolemy.vergil.fsm.modal.ModalTableauFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[310.0, 260.0]">
                </property>
                <port name="input" class="ptolemy.domains.fsm.modal.ModalPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.domains.fsm.modal.ModalPort">
                    <property name="output"/>
                </port>
                <entity name="_Controller" class="ptolemy.domains.fsm.modal.ModalController">
                    <property name="_library" class="ptolemy.moml.LibraryAttribute">
                        <configure>
    <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/annotation.xml"></input><entity name="state" class="ptolemy.domains.fsm.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity>
  </configure>
                    </property>
                    <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                        <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                        </property>
                        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                        <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
                        </property>
                        <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Create a state machine here (and ports, if needed) and&#10;create refinements for the states. Each refinement needs a director.&#10;For hybrid system models, use the CTEmbeddedDirector.">
                            <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                                <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                                </property>
                                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                                </property>
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="{90.0, 65.0}">
                        </property>
                    </property>
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[536, 350]">
                    </property>
                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                    </property>
                    <property name="wordsInKey" class="ptolemy.data.expr.Parameter" value="4">
                    </property>
                    <property name="cycle" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={136, 154, 751, 459}, maximized=false}">
                    </property>
                    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                    </property>
                    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{330.7335069444445, 154.7196180555556}">
                    </property>
                    <port name="input" class="ptolemy.domains.fsm.modal.RefinementPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="95.0, 225.0">
                        </property>
                    </port>
                    <port name="output" class="ptolemy.domains.fsm.modal.RefinementPort">
                        <property name="input"/>
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="490.0, 235.0">
                        </property>
                    </port>
                    <entity name="DoNothing" class="ptolemy.domains.fsm.kernel.State">
                        <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="DoNothing">
                        </property>
                        <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                        </property>
                        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                        <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="310.0, 225.0">
                        </property>
                    </entity>
                    <entity name="SubRotWord" class="ptolemy.domains.fsm.kernel.State">
                        <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="SubRotWord">
                        </property>
                        <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                        <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="180.0, 225.0">
                        </property>
                    </entity>
                    <relation name="relation" class="ptolemy.domains.fsm.kernel.Transition">
                        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                        </property>
                        <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="cycle = 1">
                        </property>
                        <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                        </property>
                        <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.11840474385028849">
                        </property>
                        <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                    </relation>
                    <relation name="relation2" class="ptolemy.domains.fsm.kernel.Transition">
                        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="cycle &gt;= wordsInKey -1">
                        </property>
                        <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                        </property>
                        <property name="gamma" class="ptolemy.data.expr.Parameter" value="-3.0231879097395042">
                        </property>
                        <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                    </relation>
                    <relation name="relation3" class="ptolemy.domains.fsm.kernel.Transition">
                        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="cycle &lt; wordsInKey -1">
                        </property>
                        <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="cycle = cycle + 1">
                        </property>
                        <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.283034506707155">
                        </property>
                        <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.783911495102464">
                        </property>
                        <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                        </property>
                    </relation>
                    <link port="DoNothing.incomingPort" relation="relation"/>
                    <link port="DoNothing.incomingPort" relation="relation3"/>
                    <link port="DoNothing.outgoingPort" relation="relation2"/>
                    <link port="DoNothing.outgoingPort" relation="relation3"/>
                    <link port="SubRotWord.incomingPort" relation="relation2"/>
                    <link port="SubRotWord.outgoingPort" relation="relation"/>
                </entity>
                <entity name="SubRotWord" class="ptolemy.domains.fsm.modal.Refinement">
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[634, 350]">
                    </property>
                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                    </property>
                    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="80.0, 50.0">
                        </property>
                    </property>
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={50, 147, 849, 457}, maximized=false}">
                    </property>
                    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                    </property>
                    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{317.0, 175.0}">
                    </property>
                    <port name="input" class="ptolemy.domains.fsm.modal.RefinementPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="25.0, 195.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="output" class="ptolemy.domains.fsm.modal.RefinementPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="610.0, 190.0">
                        </property>
                        <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                        <property name="tokenInitProduction" class="ptolemy.data.expr.Parameter" value="0">
                        </property>
                    </port>
                    <entity name="SampleDelay" class="ptolemy.domains.sdf.lib.SampleDelay">
                        <property name="initialOutputs" class="ptolemy.data.expr.Parameter" value="{1ub}">
                        </property>
                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="initialOutputs">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="285.0, 55.0">
                        </property>
                    </entity>
                    <entity name="Commutator" class="ptolemy.actor.lib.Commutator">
                        <property name="CommutatorIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {46, 101, 815, 516}, maximized = false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="370.0, 145.0">
                        </property>
                        <port name="output" class="ptolemy.actor.TypedIOPort">
                            <property name="output"/>
                            <property name="tokenProductionRate" class="ptolemy.actor.lib.Commutator$WidthDependentParameter" value="4 * blockSize">
                            </property>
                        </port>
                    </entity>
                    <entity name="Const" class="ptolemy.actor.lib.Const">
                        <property name="value" class="ptolemy.data.expr.Parameter" value="0ub">
                        </property>
                        <doc>Create a constant sequence</doc>
                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="215.0, 145.0">
                        </property>
                    </entity>
                    <entity name="SequenceToArray" class="ptolemy.domains.sdf.lib.SequenceToArray">
                        <property name="arrayLength" class="ptolemy.actor.parameters.PortParameter" value="4">
                        </property>
                        <property name="SequenceToArrayIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="510.0, 190.0">
                        </property>
                    </entity>
                    <entity name="ArrayToSequence" class="ptolemy.domains.sdf.lib.ArrayToSequence">
                        <property name="arrayLength" class="ptolemy.data.expr.Parameter" value="4">
                        </property>
                        <property name="ArrayToSequenceIcon" class="ptolemy.vergil.icon.EditorIcon">
                            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {104, 129, 815, 509}, maximized = false}">
                            </property>
                            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="90.0, 195.0">
                        </property>
                    </entity>
                    <entity name="Expression" class="ptolemy.actor.lib.Expression">
                        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="a#b">
                        </property>
                        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                            </property>
                            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                            </property>
                        </property>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="440.0, 180.0">
                        </property>
                        <port name="a" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                        <port name="b" class="ptolemy.actor.TypedIOPort">
                            <property name="input"/>
                        </port>
                    </entity>
                    <entity name="InstanceOfSbox" class="Sbox">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="270.0, 220.0">
                        </property>
                    </entity>
                    <entity name="InstanceOfrotate bytes" class="rotate bytes">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="{175.0, 210.0}">
                        </property>
                    </entity>
                    <entity name="InstanceOfMulTwo" class="MulTwo">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="185.0, 55.0">
                        </property>
                    </entity>
                    <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                        <vertex name="vertex1" value="275.0, 145.0">
                        </vertex>
                    </relation>
                    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                        <vertex name="vertex1" value="321.927734375, 92.3125">
                        </vertex>
                    </relation>
                    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
                    </relation>
                    <link port="input" relation="relation8"/>
                    <link port="output" relation="relation9"/>
                    <link port="SampleDelay.input" relation="relation4"/>
                    <link port="SampleDelay.output" relation="relation6"/>
                    <link port="Commutator.input" relation="relation6"/>
                    <link port="Commutator.input" relation="relation3"/>
                    <link port="Commutator.input" relation="relation3"/>
                    <link port="Commutator.input" relation="relation3"/>
                    <link port="Commutator.output" relation="relation2"/>
                    <link port="Const.output" relation="relation3"/>
                    <link port="SequenceToArray.input" relation="relation"/>
                    <link port="SequenceToArray.output" relation="relation9"/>
                    <link port="ArrayToSequence.input" relation="relation8"/>
                    <link port="ArrayToSequence.output" relation="relation11"/>
                    <link port="Expression.output" relation="relation"/>
                    <link port="Expression.a" relation="relation2"/>
                    <link port="Expression.b" relation="relation7"/>
                    <link port="InstanceOfSbox.input" relation="relation10"/>
                    <link port="InstanceOfSbox.output" relation="relation7"/>
                    <link port="InstanceOfrotate bytes.port" relation="relation11"/>
                    <link port="InstanceOfrotate bytes.port2" relation="relation10"/>
                    <link port="InstanceOfMulTwo.port" relation="relation6"/>
                    <link port="InstanceOfMulTwo.port2" relation="relation4"/>
                </entity>
                <entity name="DoNothing" class="ptolemy.domains.fsm.modal.Refinement">
                    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[367, 350]">
                    </property>
                    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                    </property>
                    <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="175.0, 85.0">
                        </property>
                    </property>
                    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {270, 154, 582, 459}, maximized = false}">
                    </property>
                    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                    </property>
                    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{183.5, 175.0}">
                    </property>
                    <port name="input" class="ptolemy.domains.fsm.modal.RefinementPort">
                        <property name="input"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="120.0, 180.0">
                        </property>
                        <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <port name="output" class="ptolemy.domains.fsm.modal.RefinementPort">
                        <property name="output"/>
                        <property name="_location" class="ptolemy.kernel.util.Location" value="320.0, 180.0">
                        </property>
                        <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="1">
                        </property>
                    </port>
                    <entity name="Discard" class="ptolemy.actor.lib.Discard">
                        <property name="_location" class="ptolemy.kernel.util.Location" value="250.0, 230.0">
                        </property>
                    </entity>
                    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                        <vertex name="vertex1" value="185.0, 180.0">
                        </vertex>
                    </relation>
                    <link port="input" relation="relation2"/>
                    <link port="output" relation="relation2"/>
                    <link port="Discard.input" relation="relation2"/>
                </entity>
                <relation name="inputRelation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="outputRelation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="input" relation="inputRelation"/>
                <link port="output" relation="outputRelation"/>
                <link port="_Controller.input" relation="inputRelation"/>
                <link port="_Controller.output" relation="outputRelation"/>
                <link port="SubRotWord.input" relation="inputRelation"/>
                <link port="SubRotWord.output" relation="outputRelation"/>
                <link port="DoNothing.input" relation="inputRelation"/>
                <link port="DoNothing.output" relation="outputRelation"/>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="354.1471862792969, 335.2726745605469">
                </vertex>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="132.5, 250.0">
                </vertex>
            </relation>
            <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[580.0, 395.0]">
                </vertex>
            </relation>
            <relation name="relation17" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex1" value="[387.5, 260.0]">
                </vertex>
            </relation>
            <link port="round key" relation="relation"/>
            <link port="Expression.output" relation="relation5"/>
            <link port="Expression.a" relation="relation17"/>
            <link port="Expression.b" relation="relation"/>
            <link port="SequenceToArray.input" relation="relation3"/>
            <link port="SequenceToArray.output" relation="relation6"/>
            <link port="SampleDelay.input" relation="relation3"/>
            <link port="SampleDelay.output" relation="relation16"/>
            <link port="SampleDelay2.input" relation="relation5"/>
            <link port="SampleDelay2.output" relation="relation3"/>
            <link port="ArrayToSequence.input" relation="relation2"/>
            <link port="ArrayToSequence.output" relation="relation17"/>
            <link port="Scale.input" relation="relation16"/>
            <link port="Scale.output" relation="relation"/>
            <link port="modal model.input" relation="relation6"/>
            <link port="modal model.output" relation="relation2"/>
        </entity>
        <entity name="RoundSequence" class="ptolemy.domains.fsm.modal.ModalModel">
            <property name="directorClass" class="ptolemy.data.expr.StringParameter" value="ptolemy.domains.fsm.kernel.MultirateFSMDirector">
            </property>
            <property name="_tableauFactory" class="ptolemy.vergil.fsm.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 190.0]">
            </property>
            <property name="requiredFiringsPerIteration" class="ptolemy.data.expr.Parameter" value="roundCount + 1">
            </property>
            <port name="text" class="ptolemy.domains.fsm.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="round key" class="ptolemy.domains.fsm.modal.ModalPort">
                <property name="input"/>
                <property name="tokenConsumptionRate" class="ptolemy.data.expr.Parameter" value="16">
                </property>
            </port>
            <port name="cipher" class="ptolemy.domains.fsm.modal.ModalPort">
                <property name="output"/>
                <property name="tokenProductionRate" class="ptolemy.data.expr.Parameter" value="0">
                </property>
            </port>
            <port name="last cipher" class="ptolemy.domains.fsm.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="intermediate cipher" class="ptolemy.domains.fsm.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.fsm.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
    <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/annotation.xml"></input><entity name="state" class="ptolemy.domains.fsm.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property></entity></entity>
  </configure>
                </property>
                <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                    </property>
                    <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                    <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
                    </property>
                    <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Create a state machine here (and ports, if needed) and&#10;create refinements for the states. Each refinement needs a director.&#10;For hybrid system models, use the CTEmbeddedDirector.">
                        <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                            <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                            </property>
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{50.0, 15.0}">
                    </property>
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[510, 350]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <property name="round" class="ptolemy.data.expr.Parameter" value="0">
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={149, 150, 725, 467}, maximized=false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{255.0, 175.0}">
                </property>
                <port name="text" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="65.0, 210.0">
                    </property>
                </port>
                <port name="round key" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="65.0, 300.0">
                    </property>
                </port>
                <port name="cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 185.0]">
                    </property>
                </port>
                <port name="last cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 145.0]">
                    </property>
                </port>
                <port name="intermediate cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 230.0]">
                    </property>
                </port>
                <entity name="regular" class="ptolemy.domains.fsm.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="regular">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[280.0, 235.0]">
                    </property>
                </entity>
                <entity name="final" class="ptolemy.domains.fsm.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="final">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="455.0, 225.0">
                    </property>
                </entity>
                <entity name="init" class="ptolemy.domains.fsm.kernel.State">
                    <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="init">
                    </property>
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.fsm.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="249.49999999999994, 149.78725609151581">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.fsm.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="round &gt;= roundCount -1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="round = round + 1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.07882926725254799">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.fsm.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                    </property>
                    <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="round = 0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.7619274809085654">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.fsm.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="true">
                    </property>
                    <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="round = 1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3263063851542727">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.fsm.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="round &lt; roundCount -1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="round = round +1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.377408250702737">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.6516593965849368">
                    </property>
                    <property name="reset" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                </relation>
                <link port="regular.incomingPort" relation="relation3"/>
                <link port="regular.incomingPort" relation="relation4"/>
                <link port="regular.outgoingPort" relation="relation"/>
                <link port="regular.outgoingPort" relation="relation4"/>
                <link port="final.incomingPort" relation="relation"/>
                <link port="final.outgoingPort" relation="relation2"/>
                <link port="init.incomingPort" relation="relation2"/>
                <link port="init.outgoingPort" relation="relation3"/>
            </entity>
            <entity name="regular" class="ptolemy.domains.fsm.modal.Refinement">
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[667, 350]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="105.0, 65.0">
                    </property>
                </property>
                <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                    </property>
                    <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                    <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
                    </property>
                    <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="A normal encryption round.">
                        <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                            <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                            </property>
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{10.0, 305.0}">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {72, 150, 882, 459}, maximized = false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{333.5, 175.0}">
                </property>
                <port name="text" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 120.0]">
                    </property>
                </port>
                <port name="round key" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="50.0, 275.0">
                    </property>
                </port>
                <port name="cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 120.0]">
                    </property>
                </port>
                <port name="last cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 175.0]">
                    </property>
                </port>
                <port name="intermediate cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 265.0]">
                    </property>
                </port>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="input # roundKey">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="430.0, 265.0">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="roundKey" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="InstanceOfSbox" class="Sbox">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="215.0, 175.0">
                    </property>
                </entity>
                <entity name="InstanceOfShift Row" class="Shift Row">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="315.0, 175.0">
                    </property>
                </entity>
                <entity name="InstanceOfMix Column" class="Mix Column">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="440.0, 175.0">
                    </property>
                </entity>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="505.0, 265.0">
                    </vertex>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="round key" relation="relation6"/>
                <link port="last cipher" relation="relation"/>
                <link port="intermediate cipher" relation="relation2"/>
                <link port="Expression.output" relation="relation2"/>
                <link port="Expression.input" relation="relation5"/>
                <link port="Expression.roundKey" relation="relation6"/>
                <link port="InstanceOfSbox.input" relation="relation"/>
                <link port="InstanceOfSbox.output" relation="relation3"/>
                <link port="InstanceOfShift Row.port" relation="relation3"/>
                <link port="InstanceOfShift Row.port2" relation="relation4"/>
                <link port="InstanceOfMix Column.port" relation="relation4"/>
                <link port="InstanceOfMix Column.port2" relation="relation5"/>
            </entity>
            <entity name="final" class="ptolemy.domains.fsm.modal.Refinement">
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[694, 387]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="100.0, 55.0">
                    </property>
                </property>
                <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                    </property>
                    <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                    <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
                    </property>
                    <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The final encryption round, which is similar to a normal encryption round, &#10;except that it lacks the MixColumn operation.&#10;This makes encryption and decryption more symmetric.">
                        <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                            <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                            </property>
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 320.0}">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {-4, -4, 909, 496}, maximized = false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{348.2859848484848, 201.2679924242424}">
                </property>
                <port name="text" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 135.0]">
                    </property>
                </port>
                <port name="round key" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{40.0, 275.0}">
                    </property>
                </port>
                <port name="cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[540.0, 210.0]">
                    </property>
                </port>
                <port name="last cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 220.0]">
                    </property>
                </port>
                <port name="intermediate cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[540.0, 265.0]">
                    </property>
                </port>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="input # roundKey">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="roundKey" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <entity name="InstanceOfSbox" class="Sbox">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[220.0, 165.0]">
                    </property>
                </entity>
                <entity name="InstanceOfShift Row" class="Shift Row">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[320.0, 165.0]">
                    </property>
                </entity>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <vertex name="vertex1" value="[505.0, 210.0]">
                    </vertex>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="round key" relation="relation2"/>
                <link port="cipher" relation="relation6"/>
                <link port="last cipher" relation="relation"/>
                <link port="Expression.output" relation="relation6"/>
                <link port="Expression.input" relation="relation5"/>
                <link port="Expression.roundKey" relation="relation2"/>
                <link port="InstanceOfSbox.input" relation="relation"/>
                <link port="InstanceOfSbox.output" relation="relation4"/>
                <link port="InstanceOfShift Row.port" relation="relation4"/>
                <link port="InstanceOfShift Row.port2" relation="relation5"/>
            </entity>
            <entity name="init" class="ptolemy.domains.fsm.modal.Refinement">
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[548, 350]">
                </property>
                <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute">
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="16">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 60.0">
                    </property>
                </property>
                <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                    </property>
                    <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                    <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
                    </property>
                    <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="The 'first' encryption round, which just XORs the key">
                        <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                            <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                            </property>
                            <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                            </property>
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{60.0, 305.0}">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={19, 261, 763, 468}, maximized=false}">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{274.0, 175.0}">
                </property>
                <port name="text" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[68.0234375, 104.81640625]">
                    </property>
                </port>
                <port name="round key" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[68.0234375, 204.81640625]">
                    </property>
                </port>
                <port name="cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[420.0, 195.0]">
                    </property>
                </port>
                <port name="last cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[68.0234375, 249.81640625]">
                    </property>
                </port>
                <port name="intermediate cipher" class="ptolemy.domains.fsm.modal.RefinementPort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[420.0, 240.0]">
                    </property>
                </port>
                <entity name="Expression" class="ptolemy.actor.lib.Expression">
                    <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="input # roundKey">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                        <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                        </property>
                        <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                        </property>
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[283.0234375, 194.81640625]">
                    </property>
                    <port name="input" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                    <port name="roundKey" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                </relation>
                <link port="text" relation="relation"/>
                <link port="round key" relation="relation2"/>
                <link port="intermediate cipher" relation="relation4"/>
                <link port="Expression.output" relation="relation4"/>
                <link port="Expression.input" relation="relation"/>
                <link port="Expression.roundKey" relation="relation2"/>
            </entity>
            <relation name="textRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="round keyRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="cipherRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="last cipherRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="intermediate cipherRelation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="text" relation="textRelation"/>
            <link port="round key" relation="round keyRelation"/>
            <link port="cipher" relation="cipherRelation"/>
            <link port="last cipher" relation="last cipherRelation"/>
            <link port="intermediate cipher" relation="intermediate cipherRelation"/>
            <link port="_Controller.text" relation="textRelation"/>
            <link port="_Controller.round key" relation="round keyRelation"/>
            <link port="_Controller.cipher" relation="cipherRelation"/>
            <link port="_Controller.last cipher" relation="last cipherRelation"/>
            <link port="_Controller.intermediate cipher" relation="intermediate cipherRelation"/>
            <link port="regular.text" relation="textRelation"/>
            <link port="regular.round key" relation="round keyRelation"/>
            <link port="regular.cipher" relation="cipherRelation"/>
            <link port="regular.last cipher" relation="last cipherRelation"/>
            <link port="regular.intermediate cipher" relation="intermediate cipherRelation"/>
            <link port="final.text" relation="textRelation"/>
            <link port="final.round key" relation="round keyRelation"/>
            <link port="final.cipher" relation="cipherRelation"/>
            <link port="final.last cipher" relation="last cipherRelation"/>
            <link port="final.intermediate cipher" relation="intermediate cipherRelation"/>
            <link port="init.text" relation="textRelation"/>
            <link port="init.round key" relation="round keyRelation"/>
            <link port="init.cipher" relation="cipherRelation"/>
            <link port="init.last cipher" relation="last cipherRelation"/>
            <link port="init.intermediate cipher" relation="intermediate cipherRelation"/>
        </entity>
        <entity name="Display" class="ptolemy.actor.lib.gui.Display">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={234, 511, 334, 241}, maximized=false}">
            </property>
            <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[326, 186]">
            </property>
            <property name="title" class="ptolemy.data.expr.StringParameter" value="Intermediate Round Output">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[460.0, 235.0]">
            </property>
        </entity>
        <entity name="convertToString" class="convertToStringClass">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 235.0]">
            </property>
        </entity>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[315.0, 235.0]">
            </vertex>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[205.0, 235.0]">
            </vertex>
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="text" relation="relation2"/>
        <link port="cipher" relation="relation"/>
        <link port="RoundKeyGenerator.round key" relation="relation12"/>
        <link port="RoundSequence.text" relation="relation2"/>
        <link port="RoundSequence.round key" relation="relation12"/>
        <link port="RoundSequence.cipher" relation="relation"/>
        <link port="RoundSequence.last cipher" relation="relation8"/>
        <link port="RoundSequence.intermediate cipher" relation="relation8"/>
        <link port="Display.input" relation="relation3"/>
        <link port="convertToString.port" relation="relation8"/>
        <link port="convertToString.port2" relation="relation3"/>
    </entity>
    <entity name="Display" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={576, 509, 334, 241}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[326, 186]">
        </property>
        <property name="title" class="ptolemy.data.expr.StringParameter" value="Encrypted Block">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 205.0]">
        </property>
    </entity>
    <entity name="Ramp" class="ptolemy.actor.lib.Ramp">
        <property name="init" class="ptolemy.data.expr.Parameter" value="0x0ub">
        </property>
        <property name="step" class="ptolemy.actor.parameters.PortParameter" value="0x1ub">
        </property>
        <doc>Create a sequence of tokens with increasing value</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 205.0]">
        </property>
    </entity>
    <entity name="convertToString" class="convertToStringClass">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[295.0, 205.0]">
        </property>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[135.0, 205.0]">
        </vertex>
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="rijndael.text" relation="relation"/>
    <link port="rijndael.cipher" relation="relation2"/>
    <link port="Display.input" relation="relation3"/>
    <link port="Ramp.output" relation="relation"/>
    <link port="convertToString.port" relation="relation2"/>
    <link port="convertToString.port2" relation="relation3"/>
</entity>
