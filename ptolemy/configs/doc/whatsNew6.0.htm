<html>
<head>
<!-- $Id$ -->
<!--

This file has pointers to tours of what's new in version 6.0

The version number should match
ptolemy.kernel.attributes.VersionAttribute.CURRENT_VERSION
so that we can easily find and update the version number

-->
<link href="../../../doc/default.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Tour of What's New in Version 6.0.2</h1>
See also <a href="whatsNew.htm">What's New in other versions</a>.

<p>Contents:
<ul>
<li> <a href="#highlights">Highlights</a>
<li> <a href="#other">Other Key New Capabilities</a>
<li> <a href="#libraries">New and Enhanced Actor Libraries</a>
<li> <a href="#demos">New demonstrations</a>
<li> <a href="#features">Additional features</a>
<li> <a href="#bugs">Bug fixes</a>
</ul>

<h2> <a name="highlights">Highlights</a></h2>
<ul>
<li> Ptolemy II C Code Generation <i>($PTII/ptolemy/codegen was removed after Ptolemy II 8.0. Use $PTII/ptolemy/cg instead.)</i>
 <p>Primary Developers: Jackie Leung, Gang Zhou, Ye Zhou, Edward A. Lee,
	Christopher Brooks
 <br>  Ptolemy II can now generate C code for SDF, FSM and HDF models.
  This new code generator consists of actor templates (called helpers)
  that contain C code stubs that are stitched together.  Only a subset
  of actors have helpers, so only a subset of models can be converted
  to C.  Creating new helpers is fairly easy though.  The code generator
  has been written to be easily extensible to languages other than C.


<li> The
<a href="../../../ptolemy/domains/rendezvous/doc/main.htm">Rendezvous domain</a>:
 <br>Primary Authors: Thomas Huining Feng, Edward A. Lee
 <br>In the Rendezvous domain in Ptolemy II, each actor executes in
its own thread of control, and communication between actors is
by rendezvous.  If an actor is ready to send a message,
it blocks until the receiving actor is ready to receive it. Similarly if
an actor is ready to receive a message, it blocks until the sending actor
is ready to send it.
<p>
This domain supports both conditional and multi-way rendezvous.
In conditional rendezvous, an actor is willing to rendezvous with
any one of several other actors. In multiway rendezvous, an actor requires
rendezvous with multiple other actors at the same time.
When using conditional rendezvous, the choice of which rendezvous
occurs is nondeterministic, in general.
<P>
The model of computation is based on the Communicating Sequential
Processesmodel first proposed by Hoare in 1978. Rendezvous-based
communication is also known as synchronous message passing, but we
avoid this term to avoid confusion with the SR (synchronous/reactive)
domain.
<P><a href="../../../ptolemy/configs/doc/completeDemos.htm#rendezvous">Demonstrations</a> - 
Javadoc: <a href="../../../doc/codeDoc/ptolemy/domains/rendezvous/kernel/package-summary.html#in_browser">kernel</a>, 
<a href="../../../doc/codeDoc/ptolemy/domains/rendezvous/lib/package-summary.html#in_browser">lib</a>

<li> <a href="../../../ptolemy/configs/viptos/intro.htm">Viptos</a> 
 <i>Visual editor, code generator, and simulator for TinyOS programs</i>.
 <br>Primary Author: Elaine Cheong
 <br><B>Viptos</B> is an interface between TinyOS and Ptolemy II that
provides a graphical user interface for TinyOS developers.  Users can create TinyOS programs as block diagrams and use Viptos to generate code for any TinyOS-supported target hardware.  Users can also simulate heterogenous networks of TinyOS-based nodes within Viptos.  Viptos includes a tool to make existing libraries of TinyOS/nesC components available as graphical blocks (nc2moml), and another tool to transform existing TinyOS/nesC applications into Viptos models (ncapp2moml).
<p>

<li> <a href="ptdoc:ptolemy.distributed.domains.sdf.kernel.DistributedSDFDirector">Distributed SDF Domain using Jini</a>
 <br>Primary Author: Daniel Lazaro Cuadrado (Aalborg University).
 <br> The Distributed-SDF domain is an extended version of the existing SDF
 Domain that performs the simulation in a distributed manner using
 Jini.  The Distributed-SDF Directory includes 
 pipelining techniques which result in a 
 fully parallel execution of the model (all actors 
 are fired in parallel) after a buffering phase.
 <p><a href="../../../ptolemy/distributed/demo/Sleep/Sleep.xml">Distributed Sleep Demo</a> -
Javadoc:
 <a href="../../../doc/codeDoc/ptolemy/distributed/actor/package-summary.html#in_browser">actor</a>,
 <a href="../../../doc/codeDoc/ptolemy/distributed/client/package-summary.html#in_browser">client</a>,
 <a href="../../../doc/codeDoc/ptolemy/distributed/common/package-summary.html#in_browser">common</a>,
 <a href="../../../doc/codeDoc/ptolemy/distributed/domains/sdf/kernel/package-summary.html#in_browser">domains.sdf.kernel</a>,
 <a href="../../../doc/codeDoc/ptolemy/distributed/rmi/package-summary.html#in_browser">rmi</a>,
 <a href="../../../doc/codeDoc/ptolemy/distributed/util/package-summary.html#in_browser">util</a>

</ul>

<h2><a name="demos">New demonstrations</a></h2>
<ul>
<li><i>New Communicating Sequential Processes (CSP) demonstrations</i>:
<ul>
<li> <a href="../../domains/csp/demo/Barrier/Barrier.xml">Barrier Synchronization</a>
<li> <a href="../../domains/csp/demo/ResourcePool/ResourcePool.xml">Resource Management</a>
<li> <a href="../../domains/csp/demo/WriteRegulator/WriteRegulator.xml">Write Regulator</a>
</ul>

<li><i>New Continuous Time (CT) demonstrations</i>:
<i>In Ptolemy II 8.0, the continuous domain was created.  Between Ptolemy II 8.0 and 10.0, ct was removed.  The paths to the demos below have been updated from domains/ct to domains/continuous.</i>
<ul>
<li> <a href="../../domains/continuous/demo/CartPendulum/CartPendulum.xml">Cart with Pendulum</a> (Requires Java 3D, see the <a href="../../domains/gr/doc/main.htm">GR domain</a>)
<li> <a href="../../domains/continuous/demo/NewtonsCradle/NewtonsCradlePerfectlyInelastic1.xml">Newton's Cradle with Perfectly Inelastic Collisions</a> (Requires Java 3D, see the <a href="../../domains/gr/doc/main.htm">GR domain</a>)
<li> <a href="../../domains/continuous/demo/NewtonsCradle/ParameterizedNewtonsCradleAnimated.xml">Newton's Cradle with Configurable Parameters</a> (Requires Java 3D, see the <a href="../../domains/gr/doc/main.htm">GR domain</a>)
<li> <a href="../../domains/continuous/demo/NewtonsCradle/ParameterizedNewtonsCradleAnimatedNondeterministic.xml">Newton's Cradle with Balls Having Different Masses</a> (Requires Java 3D, see the <a href="../../domains/gr/doc/main.htm">GR domain</a>)
<li> <a href="../../domains/continuous/demo/Pendulum3D/Pendulum3D.xml">3D Pendulum</a> (Requires Java 3D, see the <a href="../../domains/gr/doc/main.htm">GR domain</a>)
</ul>

<li><i>New Discrete Event (DE)demonstration</i>:
<ul>
<li><a href="../../domains/de/demo/QueueAndServer/QueueAndServer.xml">Queue and Server (M/M/1 Queues)</a>
</ul>

<li><i>New Heterochronous Dataflow (HDF) demonstrations</i>:
<ul>
<li><a href="../../domains/hdf/demo/AdaptiveCoding/AdaptiveCoding.xml">AdaptiveCoding</a> (With codegen in Ptolemy II 6.0)
<li><a href="../../domains/hdf/demo/Hysteresis/Hysteresis.xml">Hysteresis</a> (With codegen in Ptolemy II 6.0)
<li><a href="../../domains/hdf/demo/Merge/Merge.xml">Merge</a> (With codegen in Ptolemy II 6.0)
</ul>

<li><i>New Rendezvous demonstrations</i>:
<ul>
<li> <a href="../../domains/rendezvous/demo/Barrier/Barrier.xml">Barrier Synchronization</a>
<li> <a href="../../domains/rendezvous/demo/ResourcePool/ResourcePool.xml">Resource Management</a>
<li> <a href="../../domains/rendezvous/demo/Sequencing/Sequencing.xml">Sequencing</a>
<li> <a href="../../domains/rendezvous/demo/WriteRegulator/WriteRegulator.xml">Write Regulator</a>
</ul>

<li><i>New Synchronous Dataflow (SDF) demonstrations</i>:
<ul>
<li> <a href="../../actor/lib/hoc/demo/Case/Case.xml">Case</a> (New in Ptolemy II 6.0) (with codegen)
</ul>

<li><i>New Process Network (PN) demonstrations</i>:
<ul>
<li><a href="../../domains/pn/demo/RemoveNilTokens/RemoveNilTokens.xml">Remove Nil Tokens</a>
</ul>


</ul>


<h2><a name="other">Other Key New Capabilities</a></h2>

<ul>
<li> <a href="ptdoc:ptolemy.actor.lib.hoc.CaseDirector">CaseDirector</a><a name="Case">,</a>


 <br>Primary Author: Edward A. Lee
 <br>The Case actor has been further developed so that it is easier
to build models that execute one of several refinements.

<li> <a href="ptdoc:ptolemy.actor.lib.Publisher">Publisher</a>,
<a href="ptdoc:ptolemy.actor.lib.Subscriber">Subscriber</a> and
<a href="ptdoc:ptolemy.actor.lib.SubscriptionAggregator">SubscriptionAggregator</a>
 <br>Primary Authors: Raymond Cardillo, Edward A. Lee 
<br>These actors use publish/subscribe semantics to read
and write tokens on a named channel.  
 The tokens are
 "tunneled" to any instance of Subscriber that names the same channel
 and that is under the control of the same director. That is, it can
 be at a different level of the hierarchy, or in an entirely different
 composite actor, as long as the relevant composite actors are
 transparent (have no director).

<li> A Token can now be "nil", which means that the data is missing.
If <a href="../../../doc/codeDoc/ptolemy/data/Token.html#nil()">Token.nil()</a> is
called, it indicates that a token is a nil or missing token, which contains no data.
  Nil or missing tokens are common in analytical systems like R and SAS
  where they are used to handle sparsely populated data sources.
  In database parlance, missing tokens are sometimes called 
  null tokens.  Since null is a Java keyword, we use the term "nil".
The PN <a href="../../../ptolemy/domains/pn/demo/RemoveNilTokens/RemoveNilTokens.xml">Remove Nil Tokens</a>
demo illustrates use of nil tokens.
</ul>

<h2><a name="libraries">New and Enhanced Actor Libraries</a>
</h2>
A number of new and enhanced actor libraries are included in version 6.0
You may also wish to refer to the
<a href="../../../doc/codeDoc/ptolemy/actor/lib/package-summary.html#in_browser">ptolemy.actor.lib</a>
package, where most of the domain-polymorphic actors reside (domain-polymorphic actors are
those that can be used in more than one domain).

<ul>
</ul>

<li><i>New generic actors</i>:
<ul>
<li><a href="ptdoc:ptolemy.actor.lib.DelayStart">DelayStart</a>
<li>ptolemy.actor.lib.FireAccumulator <i>Removed</i>
<li><a href="ptdoc:ptolemy.actor.lib.RemoveNilTokens">RemoveNilTokens</a>
<li><a href="ptdoc:ptolemy.actor.lib.Triangular">Triangular</a>
</ul>

<li><i>New Communicating Sequential Processes (CSP) actors</i>:
<ul>
<li><a href="ptdoc:ptolemy.domains.csp.lib.Barrier">Barrier</a>
<li><a href="ptdoc:ptolemy.domains.csp.lib.Buffer">Buffer</a>
<li><a href="ptdoc:ptolemy.domains.csp.lib.ResourcePool">ResourcePool</a>
</ul>

<li><i>New Discrete Event (DE) actors</i>:
<ul>
<li>ptolemy.domains.de.lib.UnionMerge <i>Moved to ptolemy.actor.lib.UnionMerge</i>
<li><a href="ptdoc:ptolemy.domains.de.lib.Wire">Wire</a>
</ul>

</ul>


<h2><a name="features"> Additional Features </a></h2>

<ul>
<li>Actor and model documentation system
 <br>Primary Authors: Edward A. Lee, Christopher Brooks.
 <br>Actor and model documentation is now displayed using a custom
 widget.  The documentation for an actor or model can be edited by 
 the user.  To view the documentation for an actor, right click on 
 the actor and select Documentation -&gt; Get Documentation.
 This functionality is implemented using
 <a
 href="ptdoc:ptolemy.vergil.actor.DocTableau">DocTableau</a>
 and other classes in vergil.actor and the
 <a href="../../../doc/codeDoc/doc/doclets/PtDoclet.html">PtDoclet</a> doclet.

<li> Relation Groups
Relations mediate connections between ports. For flexibility,
particularly with visual syntaxes, the Ptolemy II abstract syntax
permits any number of relations to be involved in any one
connection. Relations may be linked to
other relations. Any two relations that are linked are said to be
members of the same relation group. Specifically, a relation group is
a maximal set of linked relations. Semantically, a relation group has
the same meaning as a single relation.
The API of the Relation class, support linking and unlinking
relations, and also provides a method to obtain a list of all the
relations in a relation group.

<p>In a relation group, there is no significance to the order in which
relations are linked, unlike the order in which ports are linked to
relations. Also, unlike links between relations and ports, there is no
significance to multiple links between the same relations. Any two
relations are either linked or not linked.

<li>
<a href="ptdoc:ptolemy.actor.gui.CheckModelSize">CheckModelSize</a>:
<a href="about:copyright" target="_blank">about:copyright</a>
facility has been extended so that model screen size and screen
location are checked.


<li><a href="ptdoc:ptolemy.actor.gui.PtolemyPreferences">PtolemyPreferences</a>:
A preference system for UI related preferences, including:
  <ul>
     <li> preference to specify link bend radius
     <li> preference to specify relation size
     <li> preference to show parameters
  </ul>

<li><a href="ptdoc:ptolemy.actor.gui.WelcomeWindow">WelcomeWindow</a>,
<a href="ptdoc:ptolemy.actor.gui.WelcomeWindowTableau">WelcomeWindowTableau</a>:
An alternative start up screen infrastructure.

<li>ptolemy.actor.lib.hoc.AbstractCase <i>(Removed)</i>,
 <a href="ptdoc:ptolemy.actor.lib.hoc.MultiCompositeActor">MultiCompositeActor</a>,
 <a href="ptdoc:ptolemy.actor.lib.hoc.MultiCompositePort">MultiCompositePort</a>,
 <a href="ptdoc:ptolemy.actor.lib.hoc.Refinement">Refinement</a>,
 <a href="ptdoc:ptolemy.actor.lib.hoc.RefinementPort">RefinementPort</a>,
 ptolemy.domains.ct.kernel.CTCaseDirector, 
 ptolemy.domains.ct.kernel.CTCase,
 ptolemy.domains.ct.kernel.CTRefinement,
 ptolemy.vergil.fsm.CaseGraphFrame,
 ptolemy.vergil.fsm.CaseGraphTableau,
 ptolemy.domains.fsm.modal.Case:

 Used by the <a href="#Case">Case facility</a>.

<li><a href="ptdoc:ptolemy.actor.TokenSentEvent">TokenSentEvent</a>,
    <a href="ptdoc:ptolemy.actor.TokenSentListener">TokenSentListener</a>:
    Two listeners created by Oscar Barney to help with
    <a href="http://kepler-project.org#in_browser" target="_top">Kepler</a>.

<li><a href="ptdoc:ptolemy.caltrop.ddi.DataflowWithRates">DataflowWithRates</a>,
 <a href="ptdoc:ptolemy.caltrop.ddi.DDFFactory">DDFFactory</a>,
 <a href="ptdoc:ptolemy.caltrop.ddi.DDF">DDF</a>,
 ptolemy.caltrop.ddi.util.DataflowWithRatesActorInterpreter:
 Caltrop work by J&#246;rn W. Janneck, and Steve Neuendorffer

<li><a href="ptdoc:ptolemy.data.expr.ASTPtUnionConstructNode">ASTPtUnionConstructNode</a>,
 <a href="ptdoc:ptolemy.data.type.UnionType">UnionType</a>,
 <a href="ptdoc:ptolemy.data.UnionToken">UnionToken</a>:
 Support for the Union type

<li>  <a href="ptdoc:ptolemy.math.Precision">Precision</a>:
   <ul>
      <li> Provide support for unsigned FixPoint values
      <li> Modify the way Precision is represented internally
    (sign, bits, exponent offset)
      <li> Provide 4 String representations of a given precision
    (including ability to parse and recognize the appropriate
     precision format)
    <br>"3.2" (integer.fraction)
    <br>"5/3" (length/integer)
    <br>"2:-2" (vhdl)
    <br>"5e-2" (length e exponent)
   </ul> 
   <a href="ptdoc:ptolemy.math.FixPoint">FixPoint</a>:
   <ul> 
     <li> Provide "lossless" arithmetic operators. These operators
    will generate FixPoint results that "grow" if overflow occurs.
     <li> Provide quantized versions of these operators. Quantization
    is a parameter for each operator.
  </ul>
  Fixpoint and Precision work by Mike Wirthlin (Brigham Young University)


<li><a href="ptdoc:ptolemy.domains.csp.kernel.AbstractBranchController">AbstractBranchController</a>,
 <a href="ptdoc:ptolemy.domains.csp.kernel.BranchActor">BranchActor</a>,
 ptolemy.domains.csp.kernel.ConditionalBranchActor, 
 <a href="ptdoc:ptolemy.domains.csp.kernel.MultiwayBranchController">MultiwayBranchController</a>:
 Support for CSP changes

<li>ptolemy.domains.fsm.kernel.HSDirector
<li>ptolemy.domains.fsm.kernel.HSFSMDirector
<li><a href="ptdoc:ptolemy.domains.sdf.kernel.CachedSDFScheduler">CachedSDFScheduler</a>

<li>ptolemy.domains.sr.kernel.IllegalOutputException,
ptolemy.domains.sr.kernel.UnknownTokenException:
  Synchronous/Reactive rework

<li><a href="ptdoc:ptolemy.moml.LibraryBuilder">LibraryBuilder</a>:
    Support for <a href="http://kepler-project.org#in_browser" target="_top">Kepler</a>,
    added by Chad Berkeley.


<li>Haiyang Zheng just enriched the exception handling
capabilities in Ptolemy II...  Currently, if you create an actor
that implements the ExceptionHandler interface and put it into a model,
then any exception that occurs when the model is executes gets delegated
to that actor.  The first such actor is a test actor that can be used
to make regression tests that ensure that an exception is thrown.

<li><a href="ptdoc:ptolemy.util.ExecuteCommands">ExecuteCommands</a>,
  <a href="ptdoc:ptolemy.util.StreamExec">StreamExec</a>:
  Code that executes subprocesses

<li><a href="ptdoc:ptolemy.vergil.actor.DocEffigy">DocEffigy</a>,
 <a href="ptdoc:ptolemy.vergil.actor.DocManager">DocManager</a>,
 <a href="ptdoc:ptolemy.vergil.actor.DocTableau">DocTableau</a>,
 <a href="ptdoc:ptolemy.vergil.basic.CustomizeDocumentationAction">CustomizeDocumentationAction</a>,
 <a href="ptdoc:ptolemy.vergil.basic.DocAttribute">DocAttribute</a>,
 <a href="ptdoc:ptolemy.vergil.basic.DocViewerFactory">DocViewerFactory</a>,
 <a href="ptdoc:ptolemy.vergil.basic.GetDocumentationAction">GetDocumentationAction</a>,
 <a href="ptdoc:ptolemy.vergil.basic.RemoveCustomDocumentationAction">RemoveCustomDocumentationAction</a>,
 <a href="ptdoc:ptolemy.moml.filter.ActorIndex">ActorIndex</a>
 <a href="ptdoc:ptolemy.moml.filter.NamedObjClassesSeen">NamedObjClassesSeen</a>:
 Support for actor and model documentation 

<li><a href="ptdoc:ptolemy.vergil.actor.LinkManhattanConnector">LinkManhattanConnector</a>,
 <a href="ptdoc:ptolemy.vergil.actor.PortConnectSite">PortConnectSite</a>,
 <a href="ptdoc:ptolemy.vergil.actor.PortTerminal">PortTerminal</a>,
 <a href="ptdoc:ptolemy.vergil.icon.ActorNameIcon">ActorNameIcon</a>,
 <a href="ptdoc:ptolemy.vergil.icon.NameIcon">NameIcon</a>,
 <a href="ptdoc:ptolemy.vergil.kernel.attributes.VisibleAttribute">VisibleAttribute</a>,
 <a href="ptdoc:ptolemy.vergil.toolbox.RotateOrFlipPorts">RotateOrFlipPorts</a>:
  Vergil features such as controllable port orientation.
  
<li><a href="ptdoc:ptolemy.vergil.VergilInitializer">VergilInitializer</a>:
  A class that may be called during startup.

<li> New deadlock detection mechanism in process domains supporting
multi-threaded actors
<li> SDFDirector has a period parameter now, making it timed.
and a synchronizeToRealTime parameters.
<li> SDF scheduler runs faster
<li> Workspace has wait(object, timeout) method, and DE uses it (some deadlocks
   prevented when using synchronizeToRealTime).
<li> Miscellaneous user interface enhancements:
   <ul>
      <li> Decorative attributes properly go to background or foreground
      <li>Display name for parameters (need not match the name)
      <li>Multiport connections show ordering
      <li>Bus relations displayed better
      <li>Custom Icons can have a "dashArray" parameter, which  
          creates dashed lines
   </ul>


<li> <i>Java compatibility</i>:
<br>
Ptolemy II can be compiled under Java 1.5.0_06 and Java 1.4.2_11.
Java  1.5.0_06 is preferred though.

</ul>

<h2><a name="bugs">Bug fixes</a></h2>
<ul>
<li> Fixed memory leaks in MoMLParser
<li> Create hierarchy didn't work with classes
<li> Undo didn't always work with classes
<li> Couldn't drop a director (or anything containing a SharedParameter)
     into a class that already had an instance.
<li> Relation groups didn't always work with hierarchy.
<li> Paste of hierarchical models would mess up locations on the inside.

<li> The highlighting of classes and of inherited elements is now opaque.
They used to be translucent so that the highlights could compose even
though they overlapped.  However, if you print a model to EPS or PDF,
the presence of translucent elements forces the rendition to be
rasterized. This results is a major loss of quality...
<li> Paste of relations not properly offset.

</ul>

</body>
</html>
